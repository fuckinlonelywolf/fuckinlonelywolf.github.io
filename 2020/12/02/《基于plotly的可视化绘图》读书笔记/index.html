<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/logo.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.png">
  <link rel="mask-icon" href="/images/avatar.png" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.0/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css">
  <script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js"></script>

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Mist","version":"8.0.1","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":false}};
  </script>

  <meta name="description" content="《python数据分析 基于plotly的动态可视化绘图》, 孙洋洋 王硕 邢梦来 袁泉 吴娜著, 电子工业出版社. 有点plotly中文使用手册的感觉，很厉害">
<meta property="og:type" content="article">
<meta property="og:title" content="《基于plotly的可视化绘图》读书笔记">
<meta property="og:url" content="http://example.com/2020/12/02/%E3%80%8A%E5%9F%BA%E4%BA%8Eplotly%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96%E7%BB%98%E5%9B%BE%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="martini&#39;s blog">
<meta property="og:description" content="《python数据分析 基于plotly的动态可视化绘图》, 孙洋洋 王硕 邢梦来 袁泉 吴娜著, 电子工业出版社. 有点plotly中文使用手册的感觉，很厉害">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DXvp6A.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DXvSld.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DXv9OI.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DXvepQ.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DXjvfe.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DXjjYD.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DXjqw6.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DXjXFO.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DXjbex.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DXjLTK.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DXj7O1.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DXjhYF.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DXjISJ.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DXj4W4.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DXjol9.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DXjTyR.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DjfiEn.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/Djfnu4.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DjfCHs.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DjfpuQ.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DjWqAI.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DjWLNt.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DjWj9f.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DjWv38.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DjWxgS.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DjH43R.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DjH5g1.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/06/DjHTu6.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFojaR.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFozPx.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFoXZ9.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFoLqJ.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFoqr4.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFo7xU.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFoT2T.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFoIP0.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFhtTx.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFWqrn.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFWLbq.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFooGV.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFogKg.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFohan.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFoRbj.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFo2rQ.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFHlUs.png">
<meta property="og:image" content="https://s3.ax1x.com/2020/12/10/rFH15n.png">
<meta property="article:published_time" content="2020-12-02T10:02:54.000Z">
<meta property="article:modified_time" content="2020-12-14T02:34:39.180Z">
<meta property="article:author" content="martini">
<meta property="article:tag" content="python">
<meta property="article:tag" content="notes">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s3.ax1x.com/2020/12/06/DXvp6A.png">


<link rel="canonical" href="http://example.com/2020/12/02/%E3%80%8A%E5%9F%BA%E4%BA%8Eplotly%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96%E7%BB%98%E5%9B%BE%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>《基于plotly的可视化绘图》读书笔记 | martini's blog</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="martini's blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">martini's blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">wings</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">10</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">5</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">15</span></a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <section class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B"><span class="nav-number">1.</span> <span class="nav-text">快速开始</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">1.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%96%E8%BE%91%E5%99%A8"><span class="nav-number">1.2.</span> <span class="nav-text">编辑器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.3.</span> <span class="nav-text">简单示例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%B8%AE%E5%8A%A9"><span class="nav-number">1.4.</span> <span class="nav-text">查看帮助</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">1.5.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#plotly%E5%9F%BA%E7%A1%80%E5%9B%BE%E5%BD%A2"><span class="nav-number">2.</span> <span class="nav-text">plotly基础图形</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%A3%E7%82%B9%E5%9B%BE"><span class="nav-number">2.1.</span> <span class="nav-text">散点图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E6%A1%88%E4%BE%8B"><span class="nav-number">2.1.1.</span> <span class="nav-text">简单案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B7%E5%BC%8F%E8%AE%BE%E7%BD%AE"><span class="nav-number">2.1.2.</span> <span class="nav-text">样式设置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B0%94%E6%B3%A1%E5%9B%BE"><span class="nav-number">2.2.</span> <span class="nav-text">气泡图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E6%A1%88%E4%BE%8B-1"><span class="nav-number">2.2.1.</span> <span class="nav-text">简单案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B7%E5%BC%8F%E8%AE%BE%E7%BD%AE-1"><span class="nav-number">2.2.2.</span> <span class="nav-text">样式设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%A9%E6%94%BE%E8%AE%BE%E7%BD%AE"><span class="nav-number">2.2.3.</span> <span class="nav-text">缩放设置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BA%BF%E5%BD%A2%E5%9B%BE"><span class="nav-number">2.3.</span> <span class="nav-text">线形图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%A1%88%E4%BE%8B"><span class="nav-number">2.3.1.</span> <span class="nav-text">基本案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A1%AB%E5%85%85%E7%BA%BF%E5%BD%A2%E5%9B%BE"><span class="nav-number">2.3.2.</span> <span class="nav-text">填充线形图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="nav-number">2.3.3.</span> <span class="nav-text">应用案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%B1%E7%8A%B6%E5%9B%BE"><span class="nav-number">2.4.</span> <span class="nav-text">柱状图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%9F%B1%E7%8A%B6%E5%9B%BE"><span class="nav-number">2.4.1.</span> <span class="nav-text">基本柱状图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%B1%E7%8A%B6%E7%B0%87"><span class="nav-number">2.4.2.</span> <span class="nav-text">柱状簇</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%82%E5%8F%A0%E6%9F%B1%E7%8A%B6%E5%9B%BE"><span class="nav-number">2.4.3.</span> <span class="nav-text">层叠柱状图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%80%91%E5%B8%83%E5%BC%8F%E6%9F%B1%E7%8A%B6%E5%9B%BE"><span class="nav-number">2.4.4.</span> <span class="nav-text">瀑布式柱状图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B0%B4%E5%B9%B3%E6%9D%A1%E5%BD%A2%E5%9B%BE"><span class="nav-number">2.5.</span> <span class="nav-text">水平条形图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%A1%88%E4%BE%8B-1"><span class="nav-number">2.5.1.</span> <span class="nav-text">基本案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AB%98%E9%9A%BE%E5%BA%A6%E5%BA%94%E7%94%A8"><span class="nav-number">2.5.2.</span> <span class="nav-text">高难度应用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%98%E7%89%B9%E5%9B%BE"><span class="nav-number">2.6.</span> <span class="nav-text">甘特图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E6%A1%88%E4%BE%8B-2"><span class="nav-number">2.6.1.</span> <span class="nav-text">简单案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B-1"><span class="nav-number">2.6.2.</span> <span class="nav-text">应用案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9D%A2%E7%A7%AF%E5%9B%BE"><span class="nav-number">2.7.</span> <span class="nav-text">面积图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%A1%88%E4%BE%8B-2"><span class="nav-number">2.7.1.</span> <span class="nav-text">基本案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E9%83%A8%E5%A1%AB%E5%85%85%E9%9D%A2%E7%A7%AF%E5%9B%BE"><span class="nav-number">2.7.2.</span> <span class="nav-text">内部填充面积图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A0%86%E7%A7%AF%E9%9D%A2%E7%A7%AF%E5%9B%BE"><span class="nav-number">2.7.3.</span> <span class="nav-text">堆积面积图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%B4%E6%96%B9%E5%9B%BE"><span class="nav-number">2.8.</span> <span class="nav-text">直方图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%A1%88%E4%BE%8B-3"><span class="nav-number">2.8.1.</span> <span class="nav-text">基本案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8D%E5%8F%A0%E7%9B%B4%E6%96%B9%E5%9B%BE"><span class="nav-number">2.8.2.</span> <span class="nav-text">重叠直方图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%82%E5%8F%A0%E7%9B%B4%E6%96%B9%E5%9B%BE"><span class="nav-number">2.8.3.</span> <span class="nav-text">层叠直方图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%AF%E7%A7%AF%E7%9B%B4%E6%96%B9%E5%9B%BE"><span class="nav-number">2.8.4.</span> <span class="nav-text">累积直方图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9A%BE%E5%BA%A6%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="nav-number">2.8.5.</span> <span class="nav-text">难度应用案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A5%BC%E5%9B%BE"><span class="nav-number">2.9.</span> <span class="nav-text">饼图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E9%A5%BC%E5%9B%BE"><span class="nav-number">2.9.1.</span> <span class="nav-text">基本饼图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8E%AF%E5%BD%A2%E9%A5%BC%E5%9B%BE"><span class="nav-number">2.9.2.</span> <span class="nav-text">环形饼图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E6%A1%88%E4%BE%8B"><span class="nav-number">2.9.3.</span> <span class="nav-text">高级案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-1"><span class="nav-number">2.10.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#plotly%E9%AB%98%E7%BA%A7%E5%9B%BE%E5%BD%A2"><span class="nav-number">3.</span> <span class="nav-text">plotly高级图形</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97"><span class="nav-number">3.1.</span> <span class="nav-text">时间序列</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%BB%91%E5%8A%A8%E9%80%89%E6%8B%A9%E6%8E%A7%E4%BB%B6"><span class="nav-number">3.2.</span> <span class="nav-text">滑动选择控件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A1%A8%E6%A0%BC"><span class="nav-number">3.3.</span> <span class="nav-text">表格</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A1%A8%E6%A0%BC%E4%B8%8E%E5%9B%BE"><span class="nav-number">3.4.</span> <span class="nav-text">表格与图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E5%9B%BE%E8%A1%A8"><span class="nav-number">3.5.</span> <span class="nav-text">多图表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%8C%E5%9D%90%E6%A0%87%E8%BD%B4"><span class="nav-number">3.5.1.</span> <span class="nav-text">双坐标轴</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E5%9D%90%E6%A0%87%E8%BD%B4"><span class="nav-number">3.5.2.</span> <span class="nav-text">多坐标轴</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B1%E4%BA%AB%E5%9D%90%E6%A0%87%E8%BD%B4"><span class="nav-number">3.5.3.</span> <span class="nav-text">共享坐标轴</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E5%AD%90%E5%9B%BE"><span class="nav-number">3.6.</span> <span class="nav-text">多子图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%95%E4%B8%80"><span class="nav-number">3.6.1.</span> <span class="nav-text">法一</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%95%E4%BA%8C"><span class="nav-number">3.6.2.</span> <span class="nav-text">法二</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AB%98%E9%98%B6%E5%B8%83%E5%B1%80"><span class="nav-number">3.6.3.</span> <span class="nav-text">高阶布局</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%90%E5%9B%BE%E5%85%B1%E4%BA%AB%E5%9D%90%E6%A0%87%E8%BD%B4"><span class="nav-number">3.7.</span> <span class="nav-text">子图共享坐标轴</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%90%E5%9B%BE%E5%9D%90%E6%A0%87%E8%BD%B4%E8%87%AA%E5%AE%9A%E4%B9%89"><span class="nav-number">3.8.</span> <span class="nav-text">子图坐标轴自定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AD%90%E5%9B%BE"><span class="nav-number">3.9.</span> <span class="nav-text">嵌入式子图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E9%AB%98%E4%BA%AE%E6%98%BE%E7%A4%BA"><span class="nav-number">3.10.</span> <span class="nav-text">时间序列高亮显示</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ggplot2%E7%BB%98%E5%9B%BE%E7%A4%BA%E4%BE%8B"><span class="nav-number">3.11.</span> <span class="nav-text">ggplot2绘图示例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93-2"><span class="nav-number">3.12.</span> <span class="nav-text">总结</span></a></li></ol></li></ol></div>
        </section>
        <!--/noindex-->

        <section class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="martini"
      src="/images/head3.jpg">
  <p class="site-author-name" itemprop="name">martini</p>
  <div class="site-description" itemprop="description">长安一片月</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">15</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="mailto:yueze98@qq.com" title="E-Mail → mailto:yueze98@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      友链
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://klausvon.cn/" title="http:&#x2F;&#x2F;klausvon.cn" rel="noopener" target="_blank">klausvon</a>
        </li>
    </ul>
  </div>

        </section>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/fuckinlonelywolf" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">
      

      

  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/12/02/%E3%80%8A%E5%9F%BA%E4%BA%8Eplotly%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96%E7%BB%98%E5%9B%BE%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head3.jpg">
      <meta itemprop="name" content="martini">
      <meta itemprop="description" content="长安一片月">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="martini's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          《基于plotly的可视化绘图》读书笔记
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-12-02 18:02:54" itemprop="dateCreated datePublished" datetime="2020-12-02T18:02:54+08:00">2020-12-02</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-12-14 10:34:39" itemprop="dateModified" datetime="2020-12-14T10:34:39+08:00">2020-12-14</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">读书笔记</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>47k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>42 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>《python数据分析 基于plotly的动态可视化绘图》, 孙洋洋 王硕 邢梦来 袁泉 吴娜著, 电子工业出版社.</p>
<p>有点plotly中文使用手册的感觉，很厉害</p>
<a id="more"></a>

<h1 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h1><p>他说，pandas和plotly是python数据分析和量化分析两大重量级模块库：<br>pandas是业界公认的大数据工程一线最好解决方案；<br>plotly是史上最好的绘图工具之一。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install plotly -i https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple</span><br></pre></td></tr></table></figure>

<p>我安完是<code>4.13.0</code>的，所以我感觉以前主流的<code>v3</code>版本可能有些地方的写法需要变化。<br>我在桌面上建了个叫<code>python</code>的文件夹，操作用<code>jupyter</code>。<br>而且书中给的网址好像也不是那个了，不过依然可以跳转，现在好像应该是<a target="_blank" rel="noopener" href="https://plotly.com/python/v4-migration/">plotlt.com</a></p>
<p>更多官方案例见<a target="_blank" rel="noopener" href="https://plotly.com/python/">官网</a></p>
<p>需要什么语言的就对应地改网址就好。</p>
<h2 id="编辑器"><a href="#编辑器" class="headerlink" title="编辑器"></a>编辑器</h2><p>然后这个作者说要注册个账号，保存在线绘图。<br>对于做数据分析的人员来说，一般用的都是离线的，在线绘图duck不必。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">py.offline.init_notebook_mode() <span class="comment">#初始化 告诉是jupyter</span></span><br><span class="line"></span><br><span class="line">plotly.offine.plot()</span><br><span class="line">plotly.offine.iplot()</span><br></pre></td></tr></table></figure>

<p>都是离线画图的方法；前者是打开一个单独的<code>html</code>，下面语句可以命名文件名，<code>.html</code>加不加都可吧。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">py.offline.plot(data, filename = <span class="string">&#x27;first_offline_start&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>后者加个<code>i</code>是直接在<code>jupyter</code>下面输出。</p>
<p>举例区分一下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">py.offline.plot(data, filename = <span class="string">&#x27;first_offline_start&#x27;</span>) <span class="comment">#跟下句一样</span></span><br><span class="line">py.offline.plot(data, filename = <span class="string">&#x27;first_offline_start.html&#x27;</span>) <span class="comment">#打开网页first_offline_start.html</span></span><br><span class="line">py.offline.plot(data) <span class="comment">#打开网页temp-plot.html</span></span><br><span class="line">py.offline.iplot(data, filename = <span class="string">&#x27;first_offline_start&#x27;</span>) <span class="comment">#不生成网页</span></span><br><span class="line">py.offline.iplot(data) <span class="comment">#同上，直接在下面输出</span></span><br></pre></td></tr></table></figure>

<h2 id="简单示例"><a href="#简单示例" class="headerlink" title="简单示例"></a>简单示例</h2><p><img src="https://s3.ax1x.com/2020/12/06/DXvp6A.png" alt="示例"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">from</span> plotly.graph_objs <span class="keyword">import</span> Scatter, Layout, Data</span><br><span class="line"></span><br><span class="line">py.offline.init_notebook_mode()</span><br><span class="line"></span><br><span class="line">trace0 = Scatter(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">    y=[<span class="number">10</span>, <span class="number">15</span>, <span class="number">13</span>, <span class="number">17</span>]</span><br><span class="line">)</span><br><span class="line">trace1 = Scatter(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">    y=[<span class="number">16</span>, <span class="number">5</span>, <span class="number">11</span>, <span class="number">9</span>]</span><br><span class="line">)</span><br><span class="line">data = Data([trace0, trace1])</span><br><span class="line"></span><br><span class="line">py.offline.iplot(data)</span><br></pre></td></tr></table></figure>

<p><code>trace0</code>和<code>trace1</code>各自为一组画图的数据，然后以<code>列表[]</code>的形式输入到Data中</p>
<h2 id="查看帮助"><a href="#查看帮助" class="headerlink" title="查看帮助"></a>查看帮助</h2><p>记住<code>jupyter</code>就是加<code>i</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly</span><br><span class="line"><span class="built_in">help</span>(plotly.offline.iplot)</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>在线画图是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.ployly <span class="keyword">as</span> py</span><br><span class="line">py.plot</span><br></pre></td></tr></table></figure>

<p>离线画图是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly</span><br><span class="line">plotly.offline.iplot</span><br></pre></td></tr></table></figure>

<p>这一点区别和用法不知道你搞懂了吗</p>
<h1 id="plotly基础图形"><a href="#plotly基础图形" class="headerlink" title="plotly基础图形"></a>plotly基础图形</h1><p>基本的流程模板：</p>
<ul>
<li>添加图形数据，例如scatter等</li>
<li>设置画面布局，layout</li>
<li>集成图形、布局数据，Data、Figure</li>
<li>图形的输出，offine.iplot，自定义的短命令是pyplt</li>
</ul>
<h2 id="散点图"><a href="#散点图" class="headerlink" title="散点图"></a>散点图</h2><h3 id="简单案例"><a href="#简单案例" class="headerlink" title="简单案例"></a>简单案例</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot <span class="comment">#自定义一下</span></span><br><span class="line"></span><br><span class="line">N = <span class="number">100</span></span><br><span class="line">random_x = np.linspace(<span class="number">0</span>, <span class="number">1</span>, N)</span><br><span class="line">random_y0 = np.random.randn(N)+<span class="number">5</span></span><br><span class="line">random_y1 = np.random.randn(N)</span><br><span class="line">random_y2 = np.random.randn(N)<span class="number">-5</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">trace0 = go.Scatter(</span><br><span class="line">    x = random_x,</span><br><span class="line">    y = random_y0,</span><br><span class="line">    mode = <span class="string">&#x27;markers&#x27;</span>, <span class="comment"># 纯散点的绘图</span></span><br><span class="line">    name = <span class="string">&#x27;markers&#x27;</span> <span class="comment"># 曲线名称</span></span><br><span class="line">)</span><br><span class="line">trace1 = go.Scatter(</span><br><span class="line">    x = random_x,</span><br><span class="line">    y = random_y1,</span><br><span class="line">    mode = <span class="string">&#x27;lines+markers&#x27;</span>, <span class="comment"># 散点+线的绘图</span></span><br><span class="line">    name = <span class="string">&#x27;lines+markers&#x27;</span></span><br><span class="line">)</span><br><span class="line">trace2 = go.Scatter(</span><br><span class="line">    x = random_x,</span><br><span class="line">    y = random_y2,</span><br><span class="line">    mode = <span class="string">&#x27;lines&#x27;</span>, <span class="comment"># 线的绘图</span></span><br><span class="line">    name = <span class="string">&#x27;lines&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">data = [trace0, trace1, trace2]</span><br><span class="line">pyplt(data)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://s3.ax1x.com/2020/12/06/DXvSld.png" alt="散点图1"></p>
<p>仔细看除了数据差异以外，三个线的样式不同，是因为<code>mode</code>的参数不同。</p>
<h3 id="样式设置"><a href="#样式设置" class="headerlink" title="样式设置"></a>样式设置</h3><p><img src="https://s3.ax1x.com/2020/12/06/DXv9OI.png" alt="散点图2"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">N = <span class="number">500</span></span><br><span class="line">x = np.random.randn(N)</span><br><span class="line"></span><br><span class="line">trace0 = go.Scatter(</span><br><span class="line">    x = np.random.randn(N),</span><br><span class="line">    y = np.random.randn(N)+<span class="number">2</span>,</span><br><span class="line">    name = <span class="string">&#x27;Above&#x27;</span>,</span><br><span class="line">    mode = <span class="string">&#x27;markers+lines&#x27;</span>,</span><br><span class="line">    marker = <span class="built_in">dict</span>(</span><br><span class="line">        size = <span class="number">10</span>, <span class="comment"># 设置点的宽度</span></span><br><span class="line">        color = <span class="string">&#x27;rgba(152, 0, 0, .8)&#x27;</span>, <span class="comment"># 设置曲线的颜色</span></span><br><span class="line">        line = <span class="built_in">dict</span>(</span><br><span class="line">            width = <span class="number">2</span>, <span class="comment"># 设置线条的宽度</span></span><br><span class="line">            color = <span class="string">&#x27;rgb(0, 0, 0)&#x27;</span> <span class="comment"># 设置线条的颜色</span></span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">trace1 = go.Scatter(</span><br><span class="line">    x = np.random.randn(N),</span><br><span class="line">    y = np.random.randn(N) - <span class="number">2</span>,</span><br><span class="line">    name = <span class="string">&#x27;Below&#x27;</span>,</span><br><span class="line">    mode = <span class="string">&#x27;markers&#x27;</span>,</span><br><span class="line">    marker = <span class="built_in">dict</span>(</span><br><span class="line">        size = <span class="number">10</span>,</span><br><span class="line">        color = <span class="string">&#x27;rgba(255, 182, 193, .9)&#x27;</span>,</span><br><span class="line">        line = <span class="built_in">dict</span>(</span><br><span class="line">            width = <span class="number">2</span>,</span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">data = [trace0, trace1]</span><br><span class="line"></span><br><span class="line">layout = <span class="built_in">dict</span>(title = <span class="string">&#x27;Styled Scatter&#x27;</span>,</span><br><span class="line">              yaxis = <span class="built_in">dict</span>(zeroline = <span class="literal">True</span>), <span class="comment"># 显示y轴的0刻度线</span></span><br><span class="line">              xaxis = <span class="built_in">dict</span>(zeroline = <span class="literal">False</span>) <span class="comment"># 不显示x轴的0刻度线</span></span><br><span class="line">             )</span><br><span class="line"></span><br><span class="line">fig = <span class="built_in">dict</span>(data=data, layout=layout)</span><br><span class="line">pyplt(fig)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>scatter</code>参数很多，我肯定不能把书中代码和所有的参数含义都贴进来，也没有实战过。</p>
<p>其实有需要也可以购买电子版，好保存，查起来也方便。</p>
<h2 id="气泡图"><a href="#气泡图" class="headerlink" title="气泡图"></a>气泡图</h2><p>还是散点图的命令，就是调整了点的大小。</p>
<h3 id="简单案例-1"><a href="#简单案例-1" class="headerlink" title="简单案例"></a>简单案例</h3><p><img src="https://s3.ax1x.com/2020/12/06/DXvepQ.png" alt="气泡图1"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">trace0 = go.Scatter(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">    y=[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">    mode=<span class="string">&#x27;markers&#x27;</span>,</span><br><span class="line">    marker=<span class="built_in">dict</span>(  <span class="comment">###数据节点大小，包括颜色，大小，格式</span></span><br><span class="line">        size=[<span class="number">40</span>, <span class="number">60</span>, <span class="number">80</span>, <span class="number">100</span>],  </span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">data = [trace0]</span><br><span class="line">pyplt(data)</span><br></pre></td></tr></table></figure>
<h3 id="样式设置-1"><a href="#样式设置-1" class="headerlink" title="样式设置"></a>样式设置</h3><p><img src="https://s3.ax1x.com/2020/12/06/DXjvfe.png" alt="气泡图2"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">trace0 = go.Scatter(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">    y=[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">    mode=<span class="string">&#x27;markers&#x27;</span>,</span><br><span class="line">    text=[<span class="string">&#x27;A&lt;br&gt;size: 40&#x27;</span>, <span class="string">&#x27;B&lt;br&gt;size: 60&#x27;</span>, <span class="string">&#x27;C&lt;br&gt;size: 80&#x27;</span>, <span class="string">&#x27;D&lt;br&gt;size: 100&#x27;</span>],   <span class="comment">###指定每个点的悬浮文字</span></span><br><span class="line">    marker=<span class="built_in">dict</span>(</span><br><span class="line">        color= [<span class="number">120</span>, <span class="number">125</span>, <span class="number">130</span>, <span class="number">135</span>],  <span class="comment">###点的颜色</span></span><br><span class="line">        opacity=[<span class="number">1</span>, <span class="number">0.8</span>, <span class="number">0.6</span>, <span class="number">0.4</span>],  <span class="comment">###点的透明度</span></span><br><span class="line">        size=[<span class="number">40</span>, <span class="number">60</span>, <span class="number">80</span>, <span class="number">100</span>],  <span class="comment">###点的大小</span></span><br><span class="line">        showscale= <span class="literal">True</span>,  <span class="comment">###是否显示右边的颜色条</span></span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">data = [trace0]</span><br><span class="line">pyplt(data)</span><br></pre></td></tr></table></figure>
<h3 id="缩放设置"><a href="#缩放设置" class="headerlink" title="缩放设置"></a>缩放设置</h3><p><img src="https://s3.ax1x.com/2020/12/06/DXjjYD.png" alt="气泡图3"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">trace0 = go.Scatter(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">    y=[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">    text=[<span class="string">&#x27;A&lt;/br&gt;size: 40&lt;/br&gt;default&#x27;</span>, <span class="string">&#x27;B&lt;/br&gt;size: 60&lt;/br&gt;default&#x27;</span>, <span class="string">&#x27;C&lt;/br&gt;size: 80&lt;/br&gt;default&#x27;</span>, <span class="string">&#x27;D&lt;/br&gt;size: 100&lt;/br&gt;default&#x27;</span>],</span><br><span class="line">    mode=<span class="string">&#x27;markers&#x27;</span>,</span><br><span class="line">    name=<span class="string">&#x27;default&#x27;</span>,</span><br><span class="line">    marker=<span class="built_in">dict</span>(</span><br><span class="line">        size=[<span class="number">400</span>, <span class="number">600</span>, <span class="number">800</span>, <span class="number">1000</span>],</span><br><span class="line">        sizemode=<span class="string">&#x27;area&#x27;</span>, </span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line">trace1 = go.Scatter(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">    y=[<span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>],</span><br><span class="line">    text=[<span class="string">&#x27;A&lt;/br&gt;size: 40&lt;/br&gt;sizeref: 0.2&#x27;</span>, <span class="string">&#x27;B&lt;/br&gt;size: 60&lt;/br&gt;sizeref: 0.2&#x27;</span>, <span class="string">&#x27;C&lt;/br&gt;size: 80&lt;/br&gt;sizeref: 0.2&#x27;</span>, <span class="string">&#x27;D&lt;/br&gt;size: 100&lt;/br&gt;sizeref: 0.2&#x27;</span>],</span><br><span class="line">    mode=<span class="string">&#x27;markers&#x27;</span>,</span><br><span class="line">    name = <span class="string">&#x27;ref0.2&#x27;</span>,</span><br><span class="line">    marker=<span class="built_in">dict</span>(</span><br><span class="line">        size=[<span class="number">400</span>, <span class="number">600</span>, <span class="number">800</span>, <span class="number">1000</span>],</span><br><span class="line">        sizeref=<span class="number">0.2</span>,</span><br><span class="line">        sizemode=<span class="string">&#x27;area&#x27;</span>, </span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trace2 = go.Scatter(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">    y=[<span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>],</span><br><span class="line">    text=[<span class="string">&#x27;A&lt;/br&gt;size: 40&lt;/br&gt;sizeref: 2&#x27;</span>, <span class="string">&#x27;B&lt;/br&gt;size: 60&lt;/br&gt;sizeref: 2&#x27;</span>, <span class="string">&#x27;C&lt;/br&gt;size: 80&lt;/br&gt;sizeref: 2&#x27;</span>, <span class="string">&#x27;D&lt;/br&gt;size: 100&lt;/br&gt;sizeref: 2&#x27;</span>],</span><br><span class="line">    mode=<span class="string">&#x27;markers&#x27;</span>,</span><br><span class="line">    name=<span class="string">&#x27;ref2&#x27;</span>,</span><br><span class="line">    marker=<span class="built_in">dict</span>(</span><br><span class="line">        size=[<span class="number">400</span>, <span class="number">600</span>, <span class="number">800</span>, <span class="number">1000</span>], <span class="comment">#对应点的大小，举例这样，那要是实际很多数据呢？？？</span></span><br><span class="line">        sizeref=<span class="number">2</span>, <span class="comment">#缩放比例，2就是原来的1/2</span></span><br><span class="line">        sizemode=<span class="string">&#x27;area&#x27;</span>, <span class="comment">#按照面积缩放</span></span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">data = [trace0, trace1, trace2]</span><br><span class="line">pyplt(data)</span><br></pre></td></tr></table></figure>

<h2 id="线形图"><a href="#线形图" class="headerlink" title="线形图"></a>线形图</h2><h3 id="基本案例"><a href="#基本案例" class="headerlink" title="基本案例"></a>基本案例</h3><p><img src="https://s3.ax1x.com/2020/12/06/DXjqw6.png" alt="线性图1"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"><span class="comment"># 600000浦发银行20170301-20170428涨跌幅度数据，数据来源Wind</span></span><br><span class="line">profit_rate = [<span class="number">-0.001</span>, <span class="number">-0.013</span>, <span class="number">-0.004</span>, <span class="number">0.002</span>, <span class="number">0.003</span>, <span class="number">-0.001</span>, <span class="number">-0.009</span>, <span class="number">0.0</span>, <span class="number">0.007</span>,\</span><br><span class="line">    <span class="number">-0.005</span>, <span class="number">0.0</span>, <span class="number">0.001</span>, <span class="number">-0.006</span>, <span class="number">-0.006</span>, <span class="number">-0.009</span>, <span class="number">-0.013</span>, <span class="number">0.005</span>, <span class="number">0.007</span>,\</span><br><span class="line">    <span class="number">0.004</span>, <span class="number">-0.006</span>, <span class="number">-0.009</span>, <span class="number">-0.004</span>, <span class="number">0.015</span>, <span class="number">0.007</span>, <span class="number">0.001</span>, <span class="number">0.003</span>, <span class="number">-0.009</span>,\</span><br><span class="line">    <span class="number">-0.005</span>, <span class="number">0.001</span>, <span class="number">-0.008</span>, <span class="number">-0.016</span>, <span class="number">0.002</span>, <span class="number">-0.013</span>, <span class="number">-0.009</span>, <span class="number">-0.014</span>, <span class="number">0.009</span>,\</span><br><span class="line">    <span class="number">-0.003</span>, <span class="number">0.002</span>, <span class="number">-0.001</span>, <span class="number">0.011</span>, <span class="number">0.004</span>] <span class="comment">#数据为y轴</span></span><br><span class="line">date = pd.date_range(start = <span class="string">&#x27;3/1/2017&#x27;</span>, end = <span class="string">&#x27;4/30/2017&#x27;</span>)  <span class="comment">#生成对应长度的日期序列，x轴</span></span><br><span class="line">trace = [go.Scatter(</span><br><span class="line">    x = date,</span><br><span class="line">    y = profit_rate</span><br><span class="line">)]</span><br><span class="line"></span><br><span class="line">layout = <span class="built_in">dict</span>(  <span class="comment">#布局设置</span></span><br><span class="line">    title = <span class="string">&#x27;浦发银行20170301-20170428涨跌幅变化&#x27;</span>,</span><br><span class="line">    xaxis = <span class="built_in">dict</span>(title = <span class="string">&#x27;Date&#x27;</span>),</span><br><span class="line">    yaxis = <span class="built_in">dict</span>(title = <span class="string">&#x27;profit_rate&#x27;</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig = <span class="built_in">dict</span>(data = trace, layout = layout)</span><br><span class="line">pyplt(fig)</span><br></pre></td></tr></table></figure>

<p>数据缺失的情况和插值的做法等有需要可以再百度。</p>
<h3 id="填充线形图"><a href="#填充线形图" class="headerlink" title="填充线形图"></a>填充线形图</h3><p><img src="https://s3.ax1x.com/2020/12/06/DXjXFO.png" alt="线形图2"></p>
<p>比如书中的例子，绘制一个股票一段时间的最高价和最低价。图上会有三条线分别是这段时间每天的开盘价、最高价和最低价，画图的时候代码是这么做的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">x_rev = x[::<span class="number">-1</span>]</span><br><span class="line">x + x_rev</span><br></pre></td></tr></table></figure>

<pre><code>[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1]</code></pre>
<p>然后y值也是一样的处理方法，你可以想象一下，对于第一天来说，y的最高价放在了上面序列第一个1的位置，y的最低价放在了上面序列最后一个1的位置；对于最后一天来说，y的最高价放在了上面序列中间左边那个10的位置，y的最低价放在了右边那个10的位置。</p>
<p>全部代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">x_rev = x[::<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Line 1 002104恒宝股份20170518-20170602</span></span><br><span class="line">y1 = [<span class="number">8.86</span>, <span class="number">8.85</span>, <span class="number">8.69</span>, <span class="number">8.4</span>, <span class="number">8.62</span>, <span class="number">9</span>, <span class="number">8.99</span>, <span class="number">8.85</span>, <span class="number">8.59</span>, <span class="number">9.31</span>]</span><br><span class="line">y1_upper = [<span class="number">9.05</span>, <span class="number">9.03</span>, <span class="number">9.08</span>, <span class="number">8.76</span>, <span class="number">8.63</span>, <span class="number">9.04</span>, <span class="number">9.09</span>, <span class="number">9.16</span>, <span class="number">8.9</span>, <span class="number">9.45</span>]</span><br><span class="line">y1_lower = [<span class="number">8.86</span>, <span class="number">8.85</span>, <span class="number">8.64</span>, <span class="number">8.36</span>, <span class="number">8.33</span>, <span class="number">8.43</span>, <span class="number">8.93</span>, <span class="number">8.84</span>, <span class="number">8.53</span>, <span class="number">8.52</span>]</span><br><span class="line">y1_lower = y1_lower[::<span class="number">-1</span>] <span class="comment"># 逆序</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Line 2 002125湘潭电化20170518-20170602</span></span><br><span class="line">y2 = [<span class="number">10.39</span>, <span class="number">10.35</span>, <span class="number">9.85</span>, <span class="number">9.73</span>, <span class="number">9.77</span>, <span class="number">9.8</span>, <span class="number">9.75</span>, <span class="number">9.65</span>, <span class="number">9.16</span>, <span class="number">9.34</span>]</span><br><span class="line">y2_upper = [<span class="number">10.58</span>, <span class="number">10.52</span>, <span class="number">10.34</span>, <span class="number">10.14</span>, <span class="number">9.87</span>, <span class="number">9.87</span>, <span class="number">9.94</span>, <span class="number">9.6</span>, <span class="number">9.42</span>, <span class="number">9.5</span>]</span><br><span class="line">y2_lower = [<span class="number">10.15</span>, <span class="number">10.21</span>, <span class="number">9.72</span>, <span class="number">9.68</span>, <span class="number">9.24</span>, <span class="number">9.48</span>, <span class="number">9.62</span>, <span class="number">9.12</span>, <span class="number">9.12</span>, <span class="number">9.34</span>]</span><br><span class="line">y2_lower = y2_lower[::<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Line 3 002077大港股份20170518-20170602</span></span><br><span class="line">y3 = [<span class="number">11.88</span>, <span class="number">13.07</span>, <span class="number">12.75</span>, <span class="number">12.02</span>, <span class="number">12.1</span>, <span class="number">12.61</span>, <span class="number">12.42</span>, <span class="number">12.42</span>, <span class="number">11.18</span>, <span class="number">10.72</span>]</span><br><span class="line">y3_upper = [<span class="number">11.98</span>, <span class="number">13.07</span>, <span class="number">13.4</span>, <span class="number">12.91</span>, <span class="number">12.45</span>, <span class="number">13.1</span>, <span class="number">12.61</span>, <span class="number">12.65</span>, <span class="number">12.45</span>, <span class="number">11.16</span>]</span><br><span class="line">y3_lower = [<span class="number">11.6</span>, <span class="number">11.75</span>, <span class="number">12.75</span>, <span class="number">12.02</span>, <span class="number">11.8</span>, <span class="number">11.92</span>, <span class="number">12.17</span>, <span class="number">12.29</span>, <span class="number">11.18</span>, <span class="number">10.35</span>]</span><br><span class="line">y3_lower = y3_lower[::<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">trace1 = go.Scatter(</span><br><span class="line">    x = x + x_rev,</span><br><span class="line">    y = y1_upper + y1_lower,</span><br><span class="line">    fill = <span class="string">&#x27;tozerox&#x27;</span>,</span><br><span class="line">    fillcolor = <span class="string">&#x27;rgba(0,0,205,0.2)&#x27;</span>,</span><br><span class="line">    line = go.Line(color = <span class="string">&#x27;rgba(255,0,0,0)&#x27;</span>), <span class="comment">#这里改了</span></span><br><span class="line">    opacity = <span class="number">0</span>,</span><br><span class="line">    showlegend = <span class="literal">False</span>,</span><br><span class="line">    name = <span class="string">&#x27;恒宝股份&#x27;</span>,</span><br><span class="line">)</span><br><span class="line">trace2 = go.Scatter(</span><br><span class="line">    x = x + x_rev,</span><br><span class="line">    y = y2_upper + y2_lower,</span><br><span class="line">    fill = <span class="string">&#x27;tozerox&#x27;</span>,</span><br><span class="line">    fillcolor = <span class="string">&#x27;rgba(30,144,255,0.2)&#x27;</span>,</span><br><span class="line">    line = go.Line(color = <span class="string">&#x27;rgba(255,0,0,0)&#x27;</span>),</span><br><span class="line">    name = <span class="string">&#x27;湘潭电化&#x27;</span>,</span><br><span class="line">    showlegend = <span class="literal">False</span>,</span><br><span class="line">)</span><br><span class="line">trace3 = go.Scatter(</span><br><span class="line">    x = x+x_rev,</span><br><span class="line">    y = y3_upper+y3_lower,</span><br><span class="line">    fill = <span class="string">&#x27;tozerox&#x27;</span>,</span><br><span class="line">    fillcolor = <span class="string">&#x27;rgba(112,128,144,0.2)&#x27;</span>,</span><br><span class="line">    line = go.Line(color = <span class="string">&#x27;rgba(255,0,0,0)&#x27;</span>),</span><br><span class="line">    showlegend = <span class="literal">False</span>,</span><br><span class="line">    name = <span class="string">&#x27;大港股份&#x27;</span>,</span><br><span class="line">)</span><br><span class="line">trace4 = go.Scatter(</span><br><span class="line">    x = x,</span><br><span class="line">    y = y1,</span><br><span class="line">    line = go.Line(color = <span class="string">&#x27;rgb(0,0,205)&#x27;</span>),</span><br><span class="line">    mode = <span class="string">&#x27;lines&#x27;</span>,</span><br><span class="line">    name = <span class="string">&#x27;恒宝股份&#x27;</span>,</span><br><span class="line">)</span><br><span class="line">trace5 = go.Scatter(</span><br><span class="line">    x = x,</span><br><span class="line">    y = y2,</span><br><span class="line">    line = go.Line(color=<span class="string">&#x27;rgb(30,144,255)&#x27;</span>),</span><br><span class="line">    mode = <span class="string">&#x27;lines&#x27;</span>,</span><br><span class="line">    name = <span class="string">&#x27;湘潭电化&#x27;</span>,</span><br><span class="line">)</span><br><span class="line">trace6 = go.Scatter(</span><br><span class="line">    x = x,</span><br><span class="line">    y = y3,</span><br><span class="line">    line = go.Line(color=<span class="string">&#x27;rgb(112,128,144)&#x27;</span>),</span><br><span class="line">    mode = <span class="string">&#x27;lines&#x27;</span>,</span><br><span class="line">    name = <span class="string">&#x27;大港股份&#x27;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">data = go.Data([trace1, trace2, trace3, trace4, trace5, trace6])</span><br><span class="line"><span class="comment">#&quot;&quot;&quot;</span></span><br><span class="line">layout = go.Layout(</span><br><span class="line">    paper_bgcolor = <span class="string">&#x27;rgb(255,255,255)&#x27;</span>,</span><br><span class="line">    plot_bgcolor = <span class="string">&#x27;rgb(229,229,229)&#x27;</span>,</span><br><span class="line">    xaxis = go.XAxis(</span><br><span class="line">        gridcolor = <span class="string">&#x27;rgb(255,255,255)&#x27;</span>,</span><br><span class="line">        <span class="built_in">range</span> = [<span class="number">1</span>,<span class="number">10</span>],</span><br><span class="line">        showgrid = <span class="literal">True</span>,</span><br><span class="line">        showline = <span class="literal">False</span>,</span><br><span class="line">        showticklabels = <span class="literal">True</span>,</span><br><span class="line">        tickcolor = <span class="string">&#x27;rgb(127,127,127)&#x27;</span>,</span><br><span class="line">        ticks = <span class="string">&#x27;outside&#x27;</span>,</span><br><span class="line">        zeroline = <span class="literal">False</span></span><br><span class="line">    ),</span><br><span class="line">    yaxis = go.YAxis(</span><br><span class="line">        gridcolor = <span class="string">&#x27;rgb(255,255,255)&#x27;</span>,</span><br><span class="line">        showgrid = <span class="literal">True</span>,</span><br><span class="line">        showline = <span class="literal">False</span>,</span><br><span class="line">        showticklabels = <span class="literal">True</span>,</span><br><span class="line">        tickcolor = <span class="string">&#x27;rgb(127,127,127)&#x27;</span>,</span><br><span class="line">        ticks = <span class="string">&#x27;outside&#x27;</span>,</span><br><span class="line">        zeroline = <span class="literal">False</span></span><br><span class="line">    ),</span><br><span class="line">)</span><br><span class="line"><span class="comment">#&quot;&quot;&quot;</span></span><br><span class="line">fig = go.Figure(data = data, layout = layout)</span><br><span class="line">pyplt(fig)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>但是有个地方我并不确定，那就是这个最高价和最低价的线的透明设置，原代码为：</p>
<pre><code>    line = go.Line(color = &#39;transparent&#39;),</code></pre>
<p>我看懂他的逻辑了，但是我并不能成功运行，可能是版本的问题，我试了试直接写<code>opacity</code>，结果不行，所以暂时把这个参数值替换成了<code>&#39;whitesmoke&#39;</code>(随便取的)</p>
<p>不好意思我会了，<code>rgba</code>里第四个参数是不透明度，那我直接改成白色非常透明就好了，即：</p>
<pre><code>    line = go.Line(color = &#39;rgba(255,0,0,0)&#39;),</code></pre>
<p>有点东西</p>
<h3 id="应用案例"><a href="#应用案例" class="headerlink" title="应用案例"></a>应用案例</h3><p>加了个应用是因为我觉得这个用循环来写在本书是第一次出现，而且里面的参数也很多，挺有价值。所以就好好看好好学这个写法的逻辑，然后参数我反复看了很久，书上说前面都提到了，其实没有。</p>
<p>我个人认为下面这个应该是写错了：</p>
<pre><code>color = colors,</code></pre>
<p>但我也很怀疑，他能运行出来应该不会是<code>error</code>，但是赋的值是给了<code>color</code>，而且很明显是四次，所以怎么可能是<code>colors</code>，然后我改成了：</p>
<pre><code>color = color,</code></pre>
<p>不仔细看还以为是<code>rgba</code>的写法不对，不过也多亏了这里，我想到了上面的例子设置透明度的办法。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">x_data = [ <span class="comment">#横坐标</span></span><br><span class="line">    [<span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2003</span>, <span class="number">2004</span>, <span class="number">2005</span>, <span class="number">2006</span>, <span class="number">2007</span>, <span class="number">2008</span>, <span class="number">2009</span>, <span class="number">2010</span>, <span class="number">2011</span>, <span class="number">2013</span>],</span><br><span class="line">    [<span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2003</span>, <span class="number">2004</span>, <span class="number">2005</span>, <span class="number">2006</span>, <span class="number">2007</span>, <span class="number">2008</span>, <span class="number">2009</span>, <span class="number">2010</span>, <span class="number">2011</span>, <span class="number">2013</span>],</span><br><span class="line">    [<span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2003</span>, <span class="number">2004</span>, <span class="number">2005</span>, <span class="number">2006</span>, <span class="number">2007</span>, <span class="number">2008</span>, <span class="number">2009</span>, <span class="number">2010</span>, <span class="number">2011</span>, <span class="number">2013</span>],</span><br><span class="line">    [<span class="number">2001</span>, <span class="number">2002</span>, <span class="number">2003</span>, <span class="number">2004</span>, <span class="number">2005</span>, <span class="number">2006</span>, <span class="number">2007</span>, <span class="number">2008</span>, <span class="number">2009</span>, <span class="number">2010</span>, <span class="number">2011</span>, <span class="number">2013</span>],</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">y_data = [  <span class="comment">#四个线的y</span></span><br><span class="line">    [<span class="number">74</span>, <span class="number">82</span>, <span class="number">80</span>, <span class="number">74</span>, <span class="number">73</span>, <span class="number">72</span>, <span class="number">74</span>, <span class="number">70</span>, <span class="number">70</span>, <span class="number">66</span>, <span class="number">66</span>, <span class="number">69</span>],</span><br><span class="line">    [<span class="number">45</span>, <span class="number">42</span>, <span class="number">50</span>, <span class="number">46</span>, <span class="number">36</span>, <span class="number">36</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">32</span>, <span class="number">31</span>, <span class="number">31</span>, <span class="number">28</span>],</span><br><span class="line">    [<span class="number">13</span>, <span class="number">14</span>, <span class="number">20</span>, <span class="number">24</span>, <span class="number">20</span>, <span class="number">24</span>, <span class="number">24</span>, <span class="number">40</span>, <span class="number">35</span>, <span class="number">41</span>, <span class="number">43</span>, <span class="number">50</span>],</span><br><span class="line">    [<span class="number">18</span>, <span class="number">21</span>, <span class="number">18</span>, <span class="number">21</span>, <span class="number">16</span>, <span class="number">14</span>, <span class="number">13</span>, <span class="number">18</span>, <span class="number">17</span>, <span class="number">16</span>, <span class="number">19</span>, <span class="number">23</span>],</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">traces = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">4</span>):</span><br><span class="line">    traces.append(go.Scatter(  <span class="comment">#四个线</span></span><br><span class="line">        x = x_data[i],</span><br><span class="line">        y = y_data[i],</span><br><span class="line">        mode = <span class="string">&#x27;lines&#x27;</span>,</span><br><span class="line">        line = <span class="built_in">dict</span>(color = colors[i], width = line_size[i]), </span><br><span class="line">        connectgaps = <span class="literal">True</span>, <span class="comment">#这个参数是没说的数据连接部分，true表示连接缺失值左右相邻的数据点</span></span><br><span class="line">    ))</span><br><span class="line"></span><br><span class="line">    traces.append(go.Scatter(  <span class="comment">#格外标记了一下第一个和最后一个点</span></span><br><span class="line">        x = [x_data[i][<span class="number">0</span>], x_data[i][<span class="number">11</span>]],</span><br><span class="line">        y = [y_data[i][<span class="number">0</span>], y_data[i][<span class="number">11</span>]],</span><br><span class="line">        mode = <span class="string">&#x27;markers&#x27;</span>,</span><br><span class="line">        marker = <span class="built_in">dict</span>(color = colors[i], size = mode_size[i])</span><br><span class="line">    ))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">layout = go.Layout(</span><br><span class="line">    xaxis = <span class="built_in">dict</span>(</span><br><span class="line">        showline = <span class="literal">True</span>,</span><br><span class="line">        showgrid = <span class="literal">False</span>,</span><br><span class="line">        showticklabels = <span class="literal">True</span>, <span class="comment"># True显示坐标标记</span></span><br><span class="line">        linecolor = <span class="string">&#x27;rgb(204, 204, 204)&#x27;</span>,<span class="comment"># x轴线的颜色</span></span><br><span class="line">        linewidth = <span class="number">2</span>,</span><br><span class="line">        dtick = <span class="literal">False</span>,  <span class="comment"># True自动删除部分日期标示,False保持原状</span></span><br><span class="line">        ticks = <span class="string">&#x27;outside&#x27;</span>, <span class="comment"># x轴上的刻度线，在图内or图外</span></span><br><span class="line">        tickcolor = <span class="string">&#x27;rgb(204, 204, 204)&#x27;</span>, <span class="comment"># x轴上的刻度线的颜色</span></span><br><span class="line">        tickwidth = <span class="number">2</span>, <span class="comment"># x轴上的刻度线的宽度</span></span><br><span class="line">        ticklen = <span class="number">10</span>,  <span class="comment"># x轴上的刻度线的长度</span></span><br><span class="line">        tickfont=<span class="built_in">dict</span>(         <span class="comment"># x轴上的坐标标记字体样式，大小，颜色</span></span><br><span class="line">            family = <span class="string">&#x27;Arial&#x27;</span>,</span><br><span class="line">            size = <span class="number">12</span>,</span><br><span class="line">            color = <span class="string">&#x27;rgb(82, 82, 82)&#x27;</span>,</span><br><span class="line">        ),</span><br><span class="line">    ),</span><br><span class="line">    yaxis=<span class="built_in">dict</span>(</span><br><span class="line">        showgrid = <span class="literal">False</span>,</span><br><span class="line">        zeroline = <span class="literal">False</span>,</span><br><span class="line">        showline = <span class="literal">False</span>,</span><br><span class="line">        showticklabels = <span class="literal">False</span>,</span><br><span class="line">    ),</span><br><span class="line">    autosize = <span class="literal">False</span>,</span><br><span class="line">    margin = <span class="built_in">dict</span>(</span><br><span class="line">        autoexpand = <span class="literal">False</span>,</span><br><span class="line">        l = <span class="number">100</span>,</span><br><span class="line">        r = <span class="number">20</span>,</span><br><span class="line">        t = <span class="number">110</span>,</span><br><span class="line">    ),</span><br><span class="line">    showlegend = <span class="literal">False</span>,</span><br><span class="line">)  <span class="comment">#参数太多了，有些细微的设置夸几就是一行，属实对新手不友好</span></span><br><span class="line"></span><br><span class="line">annotations = []</span><br><span class="line"></span><br><span class="line">title = <span class="string">&#x27;Main Source for News&#x27;</span></span><br><span class="line"></span><br><span class="line">labels = [<span class="string">&#x27;Television&#x27;</span>, <span class="string">&#x27;Newspaper&#x27;</span>, <span class="string">&#x27;Internet&#x27;</span>, <span class="string">&#x27;Radio&#x27;</span>]</span><br><span class="line"></span><br><span class="line">colors = [<span class="string">&#x27;rgba(67,67,67,1)&#x27;</span>, <span class="string">&#x27;rgba(115,115,115,1)&#x27;</span>, <span class="string">&#x27;rgba(49,130,189, 1)&#x27;</span>, <span class="string">&#x27;rgba(189,189,189,1)&#x27;</span>]</span><br><span class="line"></span><br><span class="line">mode_size = [<span class="number">8</span>, <span class="number">8</span>, <span class="number">12</span>, <span class="number">8</span>]</span><br><span class="line"></span><br><span class="line">line_size = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">2</span>]</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment"># 标签注释</span></span><br><span class="line"><span class="keyword">for</span> y_trace, label, color <span class="keyword">in</span> <span class="built_in">zip</span>(y_data, labels, colors):</span><br><span class="line">    <span class="comment"># 标记图的左侧的那个数值</span></span><br><span class="line">    annotations.append(<span class="built_in">dict</span>(xref = <span class="string">&#x27;paper&#x27;</span>, x = <span class="number">0.05</span>, y = y_trace[<span class="number">0</span>],   <span class="comment">#xy就是点一下纸上的位置</span></span><br><span class="line">                                  xanchor = <span class="string">&#x27;right&#x27;</span>, yanchor = <span class="string">&#x27;middle&#x27;</span>,</span><br><span class="line">                                  text = label + <span class="string">&#x27; &#123;&#125;%&#x27;</span>.<span class="built_in">format</span>(y_trace[<span class="number">0</span>]),</span><br><span class="line">                                  font = <span class="built_in">dict</span>(family = <span class="string">&#x27;Arial&#x27;</span>,</span><br><span class="line">                                            size = <span class="number">16</span>,</span><br><span class="line">                                            color = color,),</span><br><span class="line">                                  showarrow = <span class="literal">False</span>))  <span class="comment">#这里我改成True试了试，也看到变化了，但是不知道怎么形容</span></span><br><span class="line">    <span class="comment"># 标记图的右侧的那个数值</span></span><br><span class="line">    annotations.append(<span class="built_in">dict</span>(xref = <span class="string">&#x27;paper&#x27;</span>, x = <span class="number">0.95</span>, y = y_trace[<span class="number">11</span>],</span><br><span class="line">                                  xanchor = <span class="string">&#x27;left&#x27;</span>, yanchor = <span class="string">&#x27;middle&#x27;</span>,</span><br><span class="line">                                  text = <span class="string">&#x27;&#123;&#125;%&#x27;</span>.<span class="built_in">format</span>(y_trace[<span class="number">11</span>]),</span><br><span class="line">                                  font = <span class="built_in">dict</span>(family = <span class="string">&#x27;Arial&#x27;</span>,</span><br><span class="line">                                            size = <span class="number">16</span>,</span><br><span class="line">                                            color = color,),</span><br><span class="line">                                  showarrow = <span class="literal">False</span>))</span><br><span class="line"><span class="comment"># 标题的设置</span></span><br><span class="line">annotations.append(<span class="built_in">dict</span>(xref = <span class="string">&#x27;paper&#x27;</span>, yref = <span class="string">&#x27;paper&#x27;</span>, x = <span class="number">0.0</span>, y = <span class="number">1.05</span>,</span><br><span class="line">                              xanchor = <span class="string">&#x27;left&#x27;</span>, yanchor = <span class="string">&#x27;bottom&#x27;</span>,</span><br><span class="line">                              text = <span class="string">&#x27;Main Source for News&#x27;</span>,</span><br><span class="line">                              font = <span class="built_in">dict</span>(family = <span class="string">&#x27;Arial&#x27;</span>,</span><br><span class="line">                                        size = <span class="number">30</span>,</span><br><span class="line">                                        color = <span class="string">&#x27;rgb(37,37,37)&#x27;</span>),</span><br><span class="line">                              showarrow = <span class="literal">False</span>))</span><br><span class="line"><span class="comment"># 最下面的那行小字</span></span><br><span class="line">annotations.append(<span class="built_in">dict</span>(xref = <span class="string">&#x27;paper&#x27;</span>, yref = <span class="string">&#x27;paper&#x27;</span>, x = <span class="number">0.5</span>, y = <span class="number">-0.2</span>,</span><br><span class="line">                              xanchor = <span class="string">&#x27;center&#x27;</span>, yanchor = <span class="string">&#x27;top&#x27;</span>,</span><br><span class="line">                              text = <span class="string">&#x27;Source: PewResearch Center &amp; &#x27;</span> +</span><br><span class="line">                                   <span class="string">&#x27;Storytelling with data&#x27;</span>,</span><br><span class="line">                              font = <span class="built_in">dict</span>(family = <span class="string">&#x27;Arial&#x27;</span>,</span><br><span class="line">                                        size = <span class="number">12</span>,</span><br><span class="line">                                        color = <span class="string">&#x27;rgb(150,150,150)&#x27;</span>),</span><br><span class="line">                              showarrow = <span class="literal">False</span>))</span><br><span class="line"></span><br><span class="line">layout[<span class="string">&#x27;annotations&#x27;</span>] = annotations</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data = traces, layout = layout)</span><br><span class="line">pyplt(fig)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img src="https://s3.ax1x.com/2020/12/06/DXjbex.png" alt="线形图3"></p>
<h2 id="柱状图"><a href="#柱状图" class="headerlink" title="柱状图"></a>柱状图</h2><h3 id="基本柱状图"><a href="#基本柱状图" class="headerlink" title="基本柱状图"></a>基本柱状图</h3><p><img src="https://s3.ax1x.com/2020/12/06/DXjLTK.png" alt="基本柱状图"></p>
<p>使用的是<code>graph_objs</code>中的<code>Bar</code>函数，再<code>layout</code>中对<code>barmode</code>设置，可以绘制不同类型的柱状图，下面是一个简单案例的示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line"><span class="comment"># Trace</span></span><br><span class="line">trace_basic = [go.Bar(</span><br><span class="line">            x = [<span class="string">&#x27;Variable_1&#x27;</span>, <span class="string">&#x27;Variable_2&#x27;</span>, <span class="string">&#x27;Variable_3&#x27;</span>,<span class="string">&#x27;Variable_4&#x27;</span>,<span class="string">&#x27;Variable_5&#x27;</span>],</span><br><span class="line">            y = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>],</span><br><span class="line">    )]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Layout</span></span><br><span class="line">layout_basic = go.Layout(</span><br><span class="line">            title = <span class="string">&#x27;The Graph Title&#x27;</span>,</span><br><span class="line">            xaxis = go.XAxis(<span class="built_in">range</span> = [<span class="number">-0.5</span>,<span class="number">4.5</span>], domain = [<span class="number">0</span>,<span class="number">1</span>])</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="comment"># Figure</span></span><br><span class="line">figure_basic = go.Figure(data = trace_basic, layout = layout_basic)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot</span></span><br><span class="line">pyplt(figure_basic)</span><br></pre></td></tr></table></figure>

<h3 id="柱状簇"><a href="#柱状簇" class="headerlink" title="柱状簇"></a>柱状簇</h3><p>在上面基础代码的基础上加入多组数据即可：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"><span class="comment"># Traces</span></span><br><span class="line">trace_1 = go.Bar(</span><br><span class="line">            x = [<span class="string">&quot;上海物贸&quot;</span>, <span class="string">&quot;广东明珠&quot;</span>, <span class="string">&quot;五矿发展&quot;</span>],</span><br><span class="line">            y = [<span class="number">4.12</span>, <span class="number">5.32</span>, <span class="number">0.60</span>],</span><br><span class="line">            name = <span class="string">&quot;201609&quot;</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">trace_2 = go.Bar(</span><br><span class="line">            x = [<span class="string">&quot;上海物贸&quot;</span>, <span class="string">&quot;广东明珠&quot;</span>, <span class="string">&quot;五矿发展&quot;</span>],</span><br><span class="line">            y = [<span class="number">3.65</span>, <span class="number">6.14</span>, <span class="number">0.58</span>],</span><br><span class="line">            name = <span class="string">&quot;201612&quot;</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">trace_3 = go.Bar(</span><br><span class="line">            x = [<span class="string">&quot;上海物贸&quot;</span>, <span class="string">&quot;广东明珠&quot;</span>, <span class="string">&quot;五矿发展&quot;</span>],</span><br><span class="line">            y = [<span class="number">2.15</span>, <span class="number">1.35</span>, <span class="number">0.19</span>],</span><br><span class="line">            name = <span class="string">&quot;201703&quot;</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">trace = [trace_1, trace_2, trace_3]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Layout</span></span><br><span class="line">layout = go.Layout(</span><br><span class="line">            title = <span class="string">&#x27;国际贸易板块净资产收益率对比图&#x27;</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="comment"># Figure</span></span><br><span class="line">figure = go.Figure(data = trace, layout = layout)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot</span></span><br><span class="line">pyplt(figure)</span><br></pre></td></tr></table></figure>

<p><img src="https://s3.ax1x.com/2020/12/06/DXj7O1.png" alt="柱状簇"></p>
<p>这么看是非常简单的，想必这章主要是学习画图函数。</p>
<p>比方说我再这么一改，数据还是那个数据，表达形式就变了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import plotly as py</span><br><span class="line">import plotly.graph_objs as go</span><br><span class="line">pyplt &#x3D; py.offline.iplot</span><br><span class="line"># Traces</span><br><span class="line">trace_1 &#x3D; go.Bar(</span><br><span class="line">            x &#x3D; [&quot;09&#x2F;2016&quot;, &quot;12&#x2F;2016&quot;, &quot;03&#x2F;2017&quot;],</span><br><span class="line">            y &#x3D; [4.12, 3.65, 2.15],</span><br><span class="line">            name &#x3D; &quot;上海物贸&quot;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">trace_2 &#x3D; go.Bar(</span><br><span class="line">            x &#x3D; [&quot;09&#x2F;2016&quot;, &quot;12&#x2F;2016&quot;, &quot;03&#x2F;2017&quot;],</span><br><span class="line">            y &#x3D; [5.32, 6.14, 1.35],</span><br><span class="line">            name &#x3D; &quot;广东明珠&quot;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">trace_3 &#x3D; go.Bar(</span><br><span class="line">            x &#x3D; [&quot;09&#x2F;2016&quot;, &quot;12&#x2F;2016&quot;, &quot;03&#x2F;2017&quot;],</span><br><span class="line">            y &#x3D; [0.60, 0.58, 0.19],</span><br><span class="line">            name &#x3D; &quot;五矿发展&quot;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">trace &#x3D; [trace_1, trace_2, trace_3]</span><br><span class="line"></span><br><span class="line"># Layout</span><br><span class="line">layout &#x3D; go.Layout(</span><br><span class="line">            title &#x3D; &#39;国际贸易板块净资产收益率对比图&#39;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"># Figure</span><br><span class="line">figure &#x3D; go.Figure(data &#x3D; trace, layout &#x3D; layout)</span><br><span class="line"></span><br><span class="line"># Plot</span><br><span class="line">pyplt(figure)</span><br></pre></td></tr></table></figure>

<p><img src="https://s3.ax1x.com/2020/12/06/DXjhYF.png" alt="柱状簇2"></p>
<h3 id="层叠柱状图"><a href="#层叠柱状图" class="headerlink" title="层叠柱状图"></a>层叠柱状图</h3><p>或者是叫堆积柱状图，由<code>barmode = &#39;stack&#39;</code>控制，下图示例：</p>
<p>就像看多个饼图一样，个体占比清晰可见。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">trace_1 = go.Bar(</span><br><span class="line">    x = [<span class="string">&#x27;华夏新经济混合&#x27;</span>, <span class="string">&#x27;华夏上证50&#x27;</span>, <span class="string">&#x27;嘉实新机遇混合&#x27;</span>, <span class="string">&#x27;南方消费活力混合&#x27;</span>,<span class="string">&#x27;华泰柏瑞&#x27;</span>],</span><br><span class="line">    y = [<span class="number">0.7252</span>, <span class="number">0.9912</span>, <span class="number">0.5347</span>, <span class="number">0.4436</span>, <span class="number">0.9911</span>],</span><br><span class="line">    name = <span class="string">&#x27;股票投资&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trace_2 = go.Bar(</span><br><span class="line">    x = [<span class="string">&#x27;华夏新经济混合&#x27;</span>, <span class="string">&#x27;华夏上证50&#x27;</span>, <span class="string">&#x27;嘉实新机遇混合&#x27;</span>, <span class="string">&#x27;南方消费活力混合&#x27;</span>,<span class="string">&#x27;华泰柏瑞&#x27;</span>],</span><br><span class="line">    y = [<span class="number">0.2072</span>, <span class="number">0</span>, <span class="number">0.4081</span>, <span class="number">0.4955</span>, <span class="number">0.02</span>],</span><br><span class="line">    name=<span class="string">&#x27;其它投资&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trace_3 = go.Bar(</span><br><span class="line">    x = [<span class="string">&#x27;华夏新经济混合&#x27;</span>, <span class="string">&#x27;华夏上证50&#x27;</span>, <span class="string">&#x27;嘉实新机遇混合&#x27;</span>, <span class="string">&#x27;南方消费活力混合&#x27;</span>,<span class="string">&#x27;华泰柏瑞&#x27;</span>],</span><br><span class="line">    y = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.037</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">    name=<span class="string">&#x27;债券投资&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trace_4 = go.Bar(</span><br><span class="line">    x = [<span class="string">&#x27;华夏新经济混合&#x27;</span>, <span class="string">&#x27;华夏上证50&#x27;</span>, <span class="string">&#x27;嘉实新机遇混合&#x27;</span>, <span class="string">&#x27;南方消费活力混合&#x27;</span>,<span class="string">&#x27;华泰柏瑞&#x27;</span>],</span><br><span class="line">    y = [<span class="number">0.0676</span>, <span class="number">0.0087</span>, <span class="number">0.0202</span>, <span class="number">0.0609</span>, <span class="number">0.0087</span>],</span><br><span class="line">    name=<span class="string">&#x27;银行存款&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trace = [trace_1, trace_2, trace_3, trace_4]</span><br><span class="line">layout = go.Layout(</span><br><span class="line">    title = <span class="string">&#x27;基金资产配置比例图&#x27;</span>,</span><br><span class="line">    xaxis = <span class="built_in">dict</span>(tickangle = <span class="number">-45</span>),</span><br><span class="line">    barmode=<span class="string">&#x27;stack&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data = trace, layout = layout)</span><br><span class="line">pyplt(fig)</span><br></pre></td></tr></table></figure>


<p><img src="https://s3.ax1x.com/2020/12/06/DXjISJ.png" alt="层叠柱状图"></p>
<h3 id="瀑布式柱状图"><a href="#瀑布式柱状图" class="headerlink" title="瀑布式柱状图"></a>瀑布式柱状图</h3><p>不表，感觉我用不到。</p>
<h2 id="水平条形图"><a href="#水平条形图" class="headerlink" title="水平条形图"></a>水平条形图</h2><p>与柱状图共用一个函数，需要在<code>bar</code>里设置<code>orientation = &#39;h&#39;</code>，也可以通过设置<code>barmode = &#39;stack&#39;</code>绘制层叠水平条形图与瀑布式水平条形图。</p>
<h3 id="基本案例-1"><a href="#基本案例-1" class="headerlink" title="基本案例"></a>基本案例</h3><p><img src="https://s3.ax1x.com/2020/12/06/DXj4W4.png" alt="水平条形图基础"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">trace_1 = go.Bar(</span><br><span class="line">    y = [<span class="string">&#x27;华夏新经济混合&#x27;</span>, <span class="string">&#x27;嘉实新机遇混合&#x27;</span>, <span class="string">&#x27;南方消费活力混合&#x27;</span>,<span class="string">&#x27;华泰柏瑞&#x27;</span>],</span><br><span class="line">    x = [<span class="number">0.7252</span>, <span class="number">0.5347</span>, <span class="number">0.4436</span>, <span class="number">0.9911</span>],</span><br><span class="line">    orientation = <span class="string">&#x27;h&#x27;</span>,</span><br><span class="line">    name = <span class="string">&#x27;股票投资&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trace_2 = go.Bar(</span><br><span class="line">    y = [<span class="string">&#x27;华夏新经济混合&#x27;</span>, <span class="string">&#x27;嘉实新机遇混合&#x27;</span>, <span class="string">&#x27;南方消费活力混合&#x27;</span>],</span><br><span class="line">    x = [<span class="number">0.2072</span>, <span class="number">0.4081</span>, <span class="number">0.4955</span>],</span><br><span class="line">    orientation = <span class="string">&#x27;h&#x27;</span>,</span><br><span class="line">    name=<span class="string">&#x27;其它投资&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trace_3 = go.Bar(</span><br><span class="line">    y = [<span class="string">&#x27;华夏新经济混合&#x27;</span>, <span class="string">&#x27;嘉实新机遇混合&#x27;</span>, <span class="string">&#x27;南方消费活力混合&#x27;</span>],</span><br><span class="line">    x = [<span class="number">0</span>, <span class="number">0.037</span>, <span class="number">0</span>],</span><br><span class="line">    orientation = <span class="string">&#x27;h&#x27;</span>,</span><br><span class="line">    name=<span class="string">&#x27;债券投资&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trace_4 = go.Bar(</span><br><span class="line">    y = [<span class="string">&#x27;华夏新经济混合&#x27;</span>, <span class="string">&#x27;嘉实新机遇混合&#x27;</span>, <span class="string">&#x27;南方消费活力混合&#x27;</span>],</span><br><span class="line">    x = [<span class="number">0.0676</span>, <span class="number">0.0202</span>, <span class="number">0.0609</span>],</span><br><span class="line">    orientation = <span class="string">&#x27;h&#x27;</span>,</span><br><span class="line">    name=<span class="string">&#x27;银行存款&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trace = [trace_1, trace_2, trace_3, trace_4]</span><br><span class="line">layout = go.Layout(</span><br><span class="line">    title = <span class="string">&#x27;基金资产配置比例图&#x27;</span>,</span><br><span class="line">    <span class="comment">#xaxis = dict(tickangle = -45),</span></span><br><span class="line">    barmode=<span class="string">&#x27;stack&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data = trace, layout = layout)</span><br><span class="line">pyplt(fig)</span><br></pre></td></tr></table></figure>

<p>这个坐标轴我看着有点不喜欢，想想办法变成百分比的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">trace_1 = go.Bar(</span><br><span class="line">    y = [<span class="string">&#x27;华夏新经济混合&#x27;</span>, <span class="string">&#x27;嘉实新机遇混合&#x27;</span>, <span class="string">&#x27;南方消费活力混合&#x27;</span>,<span class="string">&#x27;华泰柏瑞&#x27;</span>],</span><br><span class="line">    x = [i*<span class="number">100</span> <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">0.7252</span>, <span class="number">0.5347</span>, <span class="number">0.4436</span>, <span class="number">0.9911</span>]],</span><br><span class="line">    orientation = <span class="string">&#x27;h&#x27;</span>,</span><br><span class="line">    name = <span class="string">&#x27;股票投资&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trace_2 = go.Bar(</span><br><span class="line">    y = [<span class="string">&#x27;华夏新经济混合&#x27;</span>, <span class="string">&#x27;嘉实新机遇混合&#x27;</span>, <span class="string">&#x27;南方消费活力混合&#x27;</span>],</span><br><span class="line">    x = [i*<span class="number">100</span> <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">0.2072</span>, <span class="number">0.4081</span>, <span class="number">0.4955</span>]],</span><br><span class="line">    orientation = <span class="string">&#x27;h&#x27;</span>,</span><br><span class="line">    name=<span class="string">&#x27;其它投资&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trace_3 = go.Bar(</span><br><span class="line">    y = [<span class="string">&#x27;华夏新经济混合&#x27;</span>, <span class="string">&#x27;嘉实新机遇混合&#x27;</span>, <span class="string">&#x27;南方消费活力混合&#x27;</span>],</span><br><span class="line">    x = [i*<span class="number">100</span> <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">0</span>, <span class="number">0.037</span>, <span class="number">0</span>]],</span><br><span class="line">    orientation = <span class="string">&#x27;h&#x27;</span>,</span><br><span class="line">    name=<span class="string">&#x27;债券投资&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trace_4 = go.Bar(</span><br><span class="line">    y = [<span class="string">&#x27;华夏新经济混合&#x27;</span>, <span class="string">&#x27;嘉实新机遇混合&#x27;</span>, <span class="string">&#x27;南方消费活力混合&#x27;</span>],</span><br><span class="line">    x = [i*<span class="number">100</span> <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">0.0676</span>, <span class="number">0.0202</span>, <span class="number">0.0609</span>]],</span><br><span class="line">    orientation = <span class="string">&#x27;h&#x27;</span>,</span><br><span class="line">    name=<span class="string">&#x27;银行存款&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trace = [trace_1, trace_2, trace_3, trace_4]</span><br><span class="line">layout = go.Layout(</span><br><span class="line">    title = <span class="string">&#x27;基金资产配置比例图&#x27;</span>,</span><br><span class="line">    barmode=<span class="string">&#x27;stack&#x27;</span>,</span><br><span class="line">    xaxis = <span class="built_in">dict</span>(</span><br><span class="line">    ticksuffix = <span class="string">&#x27;%&#x27;</span></span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data = trace, layout = layout)</span><br><span class="line">pyplt(fig)</span><br></pre></td></tr></table></figure>
<p><img src="https://s3.ax1x.com/2020/12/06/DXjol9.png" alt="水平条形图基础2"></p>
<h3 id="高难度应用"><a href="#高难度应用" class="headerlink" title="高难度应用"></a>高难度应用</h3><p><img src="https://s3.ax1x.com/2020/12/06/DXjTyR.png" alt="水平条形图难度"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">from</span> plotly <span class="keyword">import</span> tools</span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">y_saving = [<span class="number">1.3586</span>, <span class="number">2.2623000000000002</span>, <span class="number">4.9821999999999997</span>, <span class="number">6.5096999999999996</span>,</span><br><span class="line">            <span class="number">7.4812000000000003</span>, <span class="number">7.5133000000000001</span>, <span class="number">15.2148</span>, <span class="number">17.520499999999998</span></span><br><span class="line">            ] <span class="comment"># 左侧的，对应柱形的长度</span></span><br><span class="line">y_net_worth = [<span class="number">93453.919999999998</span>, <span class="number">81666.570000000007</span>, <span class="number">69889.619999999995</span>,</span><br><span class="line">               <span class="number">78381.529999999999</span>, <span class="number">141395.29999999999</span>, <span class="number">92969.020000000004</span>,</span><br><span class="line">               <span class="number">66090.179999999993</span>, <span class="number">122379.3</span>] <span class="comment"># 右侧的，对应折线的值，分别对应从下至上</span></span><br><span class="line">x_saving = [<span class="string">&#x27;Japan&#x27;</span>, <span class="string">&#x27;United Kingdom&#x27;</span>, <span class="string">&#x27;Canada&#x27;</span>, <span class="string">&#x27;Netherlands&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;United States&#x27;</span>, <span class="string">&#x27;Belgium&#x27;</span>, <span class="string">&#x27;Sweden&#x27;</span>, <span class="string">&#x27;Switzerland&#x27;</span>]</span><br><span class="line">x_net_worth = [<span class="string">&#x27;Japan&#x27;</span>, <span class="string">&#x27;United Kingdom&#x27;</span>, <span class="string">&#x27;Canada&#x27;</span>, <span class="string">&#x27;Netherlands&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;United States&#x27;</span>, <span class="string">&#x27;Belgium&#x27;</span>, <span class="string">&#x27;Sweden&#x27;</span>, <span class="string">&#x27;Switzerland&#x27;</span></span><br><span class="line">               ]</span><br><span class="line">trace0 = go.Bar(</span><br><span class="line">    x = y_saving,</span><br><span class="line">    y = x_saving,</span><br><span class="line">    marker = <span class="built_in">dict</span>(</span><br><span class="line">        color = <span class="string">&#x27;rgba(50, 171, 96, 0.6)&#x27;</span>, <span class="comment"># 柱形颜色</span></span><br><span class="line">        line = <span class="built_in">dict</span>(</span><br><span class="line">            color = <span class="string">&#x27;rgba(50, 171, 96, 1.0)&#x27;</span>, <span class="comment"># 柱形边框颜色</span></span><br><span class="line">            width = <span class="number">1</span>),</span><br><span class="line">    ),</span><br><span class="line">    name = <span class="string">&#x27;Household savings, percentage of household disposable income&#x27;</span>,</span><br><span class="line">    orientation = <span class="string">&#x27;h&#x27;</span>,</span><br><span class="line">)</span><br><span class="line">trace1 = go.Scatter(</span><br><span class="line">    x = y_net_worth,</span><br><span class="line">    y = x_net_worth,</span><br><span class="line">    mode = <span class="string">&#x27;lines + markers&#x27;</span>,</span><br><span class="line">    line = <span class="built_in">dict</span>(</span><br><span class="line">        color = <span class="string">&#x27;rgb(128, 0, 128)&#x27;</span>), <span class="comment"># 折线颜色</span></span><br><span class="line">    name = <span class="string">&#x27;Household net worth, Million USD/capita&#x27;</span>,</span><br><span class="line">)</span><br><span class="line">layout = <span class="built_in">dict</span>(</span><br><span class="line">    title = <span class="string">&#x27;Household savings &amp; net worth for eight OECD countries&#x27;</span>,</span><br><span class="line">    <span class="comment"># 左边的图 y 轴</span></span><br><span class="line">    yaxis1 = <span class="built_in">dict</span>(</span><br><span class="line">        showgrid = <span class="literal">False</span>,          <span class="comment"># 是否显示横向网格</span></span><br><span class="line">        showline = <span class="literal">False</span>,          <span class="comment"># 是否显示左侧轴线</span></span><br><span class="line">        showticklabels = <span class="literal">True</span>,     <span class="comment"># 是否显示坐标轴上的标注</span></span><br><span class="line">        domain = [<span class="number">0</span>, <span class="number">0.85</span>],</span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># 右边的图 y 轴</span></span><br><span class="line">    yaxis2 = <span class="built_in">dict</span>(</span><br><span class="line">        showgrid = <span class="literal">False</span>,</span><br><span class="line">        showline = <span class="literal">True</span>,</span><br><span class="line">        showticklabels = <span class="literal">False</span>,</span><br><span class="line">        linecolor = <span class="string">&#x27;rgba(102, 102, 102, 0.8)&#x27;</span>, <span class="comment"># 左侧轴线颜色</span></span><br><span class="line">        linewidth = <span class="number">2</span>,</span><br><span class="line">        domain = [<span class="number">0</span>, <span class="number">0.85</span>],</span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># 左边的图 x 轴</span></span><br><span class="line">    xaxis1 = <span class="built_in">dict</span>(</span><br><span class="line">        zeroline = <span class="literal">False</span>,     <span class="comment"># 是否显示左侧轴线</span></span><br><span class="line">        showline = <span class="literal">False</span>,     <span class="comment"># 是否显示下方轴线</span></span><br><span class="line">        showticklabels = <span class="literal">True</span>,</span><br><span class="line">        showgrid = <span class="literal">True</span>,      <span class="comment"># 是否显示纵向网格</span></span><br><span class="line">        domain = [<span class="number">0</span>, <span class="number">0.42</span>],</span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># 右边的图 x 轴</span></span><br><span class="line">    xaxis2 = <span class="built_in">dict</span>( </span><br><span class="line">        zeroline = <span class="literal">False</span>, </span><br><span class="line">        showline = <span class="literal">False</span>, </span><br><span class="line">        showticklabels = <span class="literal">True</span>, </span><br><span class="line">        showgrid = <span class="literal">True</span>, </span><br><span class="line">        domain = [<span class="number">0.47</span>, <span class="number">1</span>],</span><br><span class="line">        side = <span class="string">&#x27;top&#x27;</span>, <span class="comment"># 轴上标注在上方，默认下方</span></span><br><span class="line">        dtick = <span class="number">25000</span>, <span class="comment"># 调整轴上标注数值间隔，25000表示相邻标注间隔数值为25000</span></span><br><span class="line">    ),</span><br><span class="line">    legend = <span class="built_in">dict</span>(</span><br><span class="line">        x = <span class="number">0.029</span>,   <span class="comment"># 图例x位置</span></span><br><span class="line">        y = <span class="number">1.038</span>,   <span class="comment"># 图例y位置</span></span><br><span class="line">        font = <span class="built_in">dict</span>(</span><br><span class="line">            size = <span class="number">10</span>, <span class="comment"># 图例字号大小</span></span><br><span class="line">        ),</span><br><span class="line">    ),</span><br><span class="line">    margin = <span class="built_in">dict</span>(</span><br><span class="line">        l = <span class="number">100</span>, <span class="comment"># 左侧空白大小</span></span><br><span class="line">        r = <span class="number">20</span>,  <span class="comment"># 右侧空白大小</span></span><br><span class="line">        t = <span class="number">70</span>,  <span class="comment"># 上方空白大小</span></span><br><span class="line">        b = <span class="number">70</span>,  <span class="comment"># 下方空白大小</span></span><br><span class="line">    ),</span><br><span class="line">    paper_bgcolor = <span class="string">&#x27;rgb(248, 248, 255)&#x27;</span>, <span class="comment"># 整张图片背景颜色</span></span><br><span class="line">    plot_bgcolor = <span class="string">&#x27;rgb(248, 248, 255)&#x27;</span>,  <span class="comment"># 绘图部分背景颜色</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">annotations = []</span><br><span class="line"></span><br><span class="line">y_s = np.<span class="built_in">round</span>(y_saving, decimals = <span class="number">2</span>) <span class="comment"># 四舍五入至两位小数</span></span><br><span class="line">y_nw = np.rint(y_net_worth)            <span class="comment"># 四舍五入至整数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ydn, yd, xd <span class="keyword">in</span> <span class="built_in">zip</span>(y_nw, y_s, x_saving): <span class="comment"># 把数据对应起来</span></span><br><span class="line">    <span class="comment"># 右侧折线图设置标签</span></span><br><span class="line">    annotations.append(<span class="built_in">dict</span>(xref = <span class="string">&#x27;x2&#x27;</span>, yref = <span class="string">&#x27;y2&#x27;</span>,</span><br><span class="line">                            y = xd, x = ydn - <span class="number">20000</span>,</span><br><span class="line">                            text=<span class="string">&#x27;&#123;:,&#125;&#x27;</span>.<span class="built_in">format</span>(ydn) + <span class="string">&#x27;M&#x27;</span>, <span class="comment"># 从右向左，每隔三位&#x27;,&#x27;</span></span><br><span class="line">                            font = <span class="built_in">dict</span>(family = <span class="string">&#x27;Arial&#x27;</span>, size = <span class="number">12</span>, </span><br><span class="line">                                      color = <span class="string">&#x27;rgb(128, 0, 128)&#x27;</span>), <span class="comment"># 设置标签字体，颜色与大小</span></span><br><span class="line">                            showarrow = <span class="literal">False</span>)) <span class="comment"># 是否添加从标签到数据点的箭头</span></span><br><span class="line">    <span class="comment"># 左侧水平柱形图设置标签</span></span><br><span class="line">    annotations.append(<span class="built_in">dict</span>(xref = <span class="string">&#x27;x1&#x27;</span>, yref = <span class="string">&#x27;y1&#x27;</span>,</span><br><span class="line">                            y = xd, x = yd + <span class="number">3</span>,</span><br><span class="line">                            text = <span class="built_in">str</span>(yd) + <span class="string">&#x27;%&#x27;</span>,</span><br><span class="line">                            font = <span class="built_in">dict</span>(family = <span class="string">&#x27;Arial&#x27;</span>, size = <span class="number">12</span>,</span><br><span class="line">                                      color = <span class="string">&#x27;rgb(50, 171, 96)&#x27;</span>),</span><br><span class="line">                            showarrow = <span class="literal">False</span>))</span><br><span class="line"><span class="comment"># 下侧标签设置</span></span><br><span class="line">annotations.append(<span class="built_in">dict</span>(xref = <span class="string">&#x27;paper&#x27;</span>, yref = <span class="string">&#x27;paper&#x27;</span>, <span class="comment"># 设置文字样式</span></span><br><span class="line">                        x = <span class="number">0.3</span>, y = <span class="number">-0.05</span>, <span class="comment"># 设置文字位置</span></span><br><span class="line">                        text = <span class="string">&#x27;OECD &quot;&#x27;</span> +</span><br><span class="line">                             <span class="string">&#x27;(2015), Household savings (indicator), &#x27;</span> +</span><br><span class="line">                             <span class="string">&#x27;Household net worth (indicator). doi: &#x27;</span> +</span><br><span class="line">                             <span class="string">&#x27;10.1787/cfc6f499-en (Accessed on 05 June 2015)&#x27;</span>, <span class="comment"># 设置图下方文字</span></span><br><span class="line">                        font = <span class="built_in">dict</span>(family = <span class="string">&#x27;Arial&#x27;</span>, size = <span class="number">10</span>, <span class="comment"># 设置图下方文字格式</span></span><br><span class="line">                                  color = <span class="string">&#x27;rgb(150,150,150)&#x27;</span>),</span><br><span class="line">                        showarrow = <span class="literal">False</span>))</span><br><span class="line"></span><br><span class="line">layout[<span class="string">&#x27;annotations&#x27;</span>] = annotations</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一左一右两个画布</span></span><br><span class="line"><span class="comment"># shared_yaxes 不共享y轴，shared_xaxes 共享x轴，rows = 1, cols = 2 表示划分为两个子图</span></span><br><span class="line">fig = tools.make_subplots(rows = <span class="number">1</span>, cols = <span class="number">2</span>, </span><br><span class="line">                          shared_xaxes = <span class="literal">True</span>,</span><br><span class="line">                          shared_yaxes = <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">fig.append_trace(trace0, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">fig.append_trace(trace1, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">fig[<span class="string">&#x27;layout&#x27;</span>].update(layout)</span><br><span class="line">pyplt(fig)</span><br></pre></td></tr></table></figure>

<p>本样例来自<code>plotly</code>官网。且本书作者已给出详细注释，概括起来代码就是：</p>
<ul>
<li>数据</li>
<li>trace</li>
<li>各自的样式layout</li>
<li>各自的注释annotation</li>
<li>整个画布一分为二</li>
</ul>
<h2 id="甘特图"><a href="#甘特图" class="headerlink" title="甘特图"></a>甘特图</h2><h3 id="简单案例-2"><a href="#简单案例-2" class="headerlink" title="简单案例"></a>简单案例</h3><p><img src="https://s3.ax1x.com/2020/12/06/DjfiEn.png" alt="甘特图"></p>
<p>常用于显示项目的进度、时间的安排等与时间有关的东西。</p>
<p>使用函数为<code>plotly.figure</code>中的<code>creat_gantt</code>，通过传递事件task与开始start结束finish的数据来绘制图表。<br>越接近左侧，越早发生；<br>越接近右侧，越快结束。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.figure_factory <span class="keyword">as</span> ff</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line">df = [<span class="built_in">dict</span>(Task=<span class="string">&quot;Job A&quot;</span>, Start=<span class="string">&#x27;2009-01-01&#x27;</span>, Finish=<span class="string">&#x27;2009-02-28&#x27;</span>, Complete=<span class="number">10</span>),</span><br><span class="line">      <span class="built_in">dict</span>(Task=<span class="string">&quot;Job B&quot;</span>, Start=<span class="string">&#x27;2008-12-05&#x27;</span>, Finish=<span class="string">&#x27;2009-04-15&#x27;</span>, Complete=<span class="number">10</span>),</span><br><span class="line">      <span class="built_in">dict</span>(Task=<span class="string">&quot;Job C&quot;</span>, Start=<span class="string">&#x27;2009-02-20&#x27;</span>, Finish=<span class="string">&#x27;2009-05-30&#x27;</span>, Complete=<span class="number">50</span>),</span><br><span class="line">      <span class="built_in">dict</span>(Task=<span class="string">&quot;Job D&quot;</span>, Start=<span class="string">&#x27;2009-03-20&#x27;</span>, Finish=<span class="string">&#x27;2009-06-30&#x27;</span>, Complete=<span class="number">50</span>),</span><br><span class="line">      <span class="built_in">dict</span>(Task=<span class="string">&quot;Job E&quot;</span>, Start=<span class="string">&#x27;2009-01-12&#x27;</span>, Finish=<span class="string">&#x27;2009-04-28&#x27;</span>, Complete=<span class="number">100</span>),</span><br><span class="line">      <span class="built_in">dict</span>(Task=<span class="string">&quot;Job F&quot;</span>, Start=<span class="string">&#x27;2009-03-07&#x27;</span>, Finish=<span class="string">&#x27;2009-08-21&#x27;</span>, Complete=<span class="number">100</span>)]</span><br><span class="line"></span><br><span class="line">fig = ff.create_gantt(df, index_col=<span class="string">&#x27;Complete&#x27;</span>, show_colorbar=<span class="literal">True</span>) <span class="comment">#Complete类似一个百分比程度，是索引，传给index_col</span></span><br><span class="line">pyplt(fig)</span><br></pre></td></tr></table></figure>

<p>这图太赞了，果然是展示计划进行程度非常之合适。</p>
<h3 id="应用案例-1"><a href="#应用案例-1" class="headerlink" title="应用案例"></a>应用案例</h3><p>注意以下几个点：</p>
<ul>
<li>数据精确到了秒<code>s</code></li>
<li>上面简单案例是按照数字索引，下面是按照类别索引</li>
<li>设置了颜色<code>colors</code>,放在<code>create_grantt</code></li>
</ul>
<p><img src="https://s3.ax1x.com/2020/12/06/Djfnu4.png" alt="甘特图应用案例"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.figure_factory <span class="keyword">as</span> ff</span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">df = [</span><br><span class="line">    <span class="built_in">dict</span>(Task=<span class="string">&#x27;Morning Sleep&#x27;</span>, Start=<span class="string">&#x27;2016-01-01&#x27;</span>, Finish=<span class="string">&#x27;2016-01-01 6:00:00&#x27;</span>, Resource=<span class="string">&#x27;Sleep&#x27;</span>),</span><br><span class="line">    <span class="built_in">dict</span>(Task=<span class="string">&#x27;Breakfast&#x27;</span>, Start=<span class="string">&#x27;2016-01-01 7:00:00&#x27;</span>, Finish=<span class="string">&#x27;2016-01-01 7:30:00&#x27;</span>, Resource=<span class="string">&#x27;Food&#x27;</span>),</span><br><span class="line">    <span class="built_in">dict</span>(Task=<span class="string">&#x27;Work&#x27;</span>, Start=<span class="string">&#x27;2016-01-01 9:00:00&#x27;</span>, Finish=<span class="string">&#x27;2016-01-01 11:25:00&#x27;</span>, Resource=<span class="string">&#x27;Brain&#x27;</span>),</span><br><span class="line">    <span class="built_in">dict</span>(Task=<span class="string">&#x27;Break&#x27;</span>, Start=<span class="string">&#x27;2016-01-01 11:30:00&#x27;</span>, Finish=<span class="string">&#x27;2016-01-01 12:00:00&#x27;</span>, Resource=<span class="string">&#x27;Rest&#x27;</span>),</span><br><span class="line">    <span class="built_in">dict</span>(Task=<span class="string">&#x27;Lunch&#x27;</span>, Start=<span class="string">&#x27;2016-01-01 12:00:00&#x27;</span>, Finish=<span class="string">&#x27;2016-01-01 13:00:00&#x27;</span>, Resource=<span class="string">&#x27;Food&#x27;</span>),</span><br><span class="line">    <span class="built_in">dict</span>(Task=<span class="string">&#x27;Work&#x27;</span>, Start=<span class="string">&#x27;2016-01-01 13:00:00&#x27;</span>, Finish=<span class="string">&#x27;2016-01-01 17:00:00&#x27;</span>, Resource=<span class="string">&#x27;Brain&#x27;</span>),</span><br><span class="line">    <span class="built_in">dict</span>(Task=<span class="string">&#x27;Exercise&#x27;</span>, Start=<span class="string">&#x27;2016-01-01 17:30:00&#x27;</span>, Finish=<span class="string">&#x27;2016-01-01 18:30:00&#x27;</span>, Resource=<span class="string">&#x27;Cardio&#x27;</span>), </span><br><span class="line">    <span class="built_in">dict</span>(Task=<span class="string">&#x27;Post Workout Rest&#x27;</span>, Start=<span class="string">&#x27;2016-01-01 18:30:00&#x27;</span>, Finish=<span class="string">&#x27;2016-01-01 19:00:00&#x27;</span>, Resource=<span class="string">&#x27;Rest&#x27;</span>),</span><br><span class="line">    <span class="built_in">dict</span>(Task=<span class="string">&#x27;Dinner&#x27;</span>, Start=<span class="string">&#x27;2016-01-01 19:00:00&#x27;</span>, Finish=<span class="string">&#x27;2016-01-01 20:00:00&#x27;</span>, Resource=<span class="string">&#x27;Food&#x27;</span>),</span><br><span class="line">    <span class="built_in">dict</span>(Task=<span class="string">&#x27;Evening Sleep&#x27;</span>, Start=<span class="string">&#x27;2016-01-01 21:00:00&#x27;</span>, Finish=<span class="string">&#x27;2016-01-01 23:59:00&#x27;</span>, Resource=<span class="string">&#x27;Sleep&#x27;</span>)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">colors = <span class="built_in">dict</span>(Cardio = <span class="string">&#x27;rgb(46, 137, 205)&#x27;</span>,</span><br><span class="line">              Food = <span class="string">&#x27;rgb(114, 44, 121)&#x27;</span>,</span><br><span class="line">              Sleep = <span class="string">&#x27;rgb(198, 47, 105)&#x27;</span>,</span><br><span class="line">              Brain = <span class="string">&#x27;rgb(58, 149, 136)&#x27;</span>,</span><br><span class="line">              Rest = <span class="string">&#x27;rgb(107, 127, 135)&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fig = ff.create_gantt(df, colors = colors, index_col = <span class="string">&#x27;Resource&#x27;</span>, title = <span class="string">&#x27;Daily Schedule&#x27;</span>,</span><br><span class="line">                      bar_width = <span class="number">0.8</span>, showgrid_x = <span class="literal">True</span>, showgrid_y = <span class="literal">True</span>)</span><br><span class="line">pyplt(fig)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>现在画的图越好看，我越想知道实际工作中面对数据文件应该如何操作。</p>
<h2 id="面积图"><a href="#面积图" class="headerlink" title="面积图"></a>面积图</h2><p>使用的是<code>scatter</code>，与散点图气泡图折线图用的一样的函数。</p>
<p>还需要在折线图的基础上对<code>fill = &#39;tonexty&#39;</code>进行设置，</p>
<h3 id="基本案例-2"><a href="#基本案例-2" class="headerlink" title="基本案例"></a>基本案例</h3><p><img src="https://s3.ax1x.com/2020/12/06/DjfCHs.png" alt="面积图"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s1 = np.random.RandomState(<span class="number">8</span>) <span class="comment"># 定义局部种子</span></span><br><span class="line">s2 = np.random.RandomState(<span class="number">9</span>) </span><br><span class="line">rd1 = s1.rand(<span class="number">100</span>)/<span class="number">10</span> - <span class="number">0.02</span>  <span class="comment"># 随机生成100个交易日的收益率</span></span><br><span class="line">rd2 = s2.rand(<span class="number">100</span>)/<span class="number">10</span> - <span class="number">0.02</span></span><br><span class="line"></span><br><span class="line">initial1 = <span class="number">100000</span> <span class="comment"># 设定初始资金</span></span><br><span class="line">initial2 = <span class="number">100000</span></span><br><span class="line">total1 = []</span><br><span class="line">total2 = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(rd1)):</span><br><span class="line">    initial1 = initial1*rd1[i] + initial1 <span class="comment">#C(1+X)</span></span><br><span class="line">    initial2 = initial2*rd2[i] + initial2</span><br><span class="line">    total1.append(initial1)</span><br><span class="line">    total2.append(initial2)</span><br><span class="line"><span class="comment"># 看看人家生成想要的数的时候是多么流畅</span></span><br><span class="line"></span><br><span class="line">trace1 = go.Scatter(</span><br><span class="line">    y = total1,</span><br><span class="line">    fill = <span class="string">&#x27;tonexty&#x27;</span>,</span><br><span class="line">    name = <span class="string">&quot;策略1&quot;</span></span><br><span class="line">)</span><br><span class="line">trace2 = go.Scatter(</span><br><span class="line">    y = total2,</span><br><span class="line">    fill = <span class="string">&#x27;tozeroy&#x27;</span>,</span><br><span class="line">    mode= <span class="string">&#x27;none&#x27;</span>, <span class="comment"># 无边界线，上面那个有边界线</span></span><br><span class="line">    name = <span class="string">&quot;策略2&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">data = [trace1, trace2]</span><br><span class="line"></span><br><span class="line">layout = <span class="built_in">dict</span>(title = <span class="string">&#x27;策略净值曲线&#x27;</span>,</span><br><span class="line">              xaxis = <span class="built_in">dict</span>(title = <span class="string">&#x27;交易天数&#x27;</span>),</span><br><span class="line">              yaxis = <span class="built_in">dict</span>(title = <span class="string">&#x27;净值&#x27;</span>),</span><br><span class="line">              )</span><br><span class="line">fig = <span class="built_in">dict</span>(data = data, layout = layout)</span><br><span class="line">pyplt(fig)</span><br></pre></td></tr></table></figure>
<h3 id="内部填充面积图"><a href="#内部填充面积图" class="headerlink" title="内部填充面积图"></a>内部填充面积图</h3><p>还有一种内部填充面积图，比如还是上例，就两个<code>fill</code>分别设置成<code>fill = None&#39;,</code>和<code>fill = &#39;tonexty&#39;</code>即可。<br>注意上例中第二个是<code>fill = &#39;tozeroy&#39;</code>！！<br>这样只有两个折线之间的阴影了。</p>
<p><img src="https://s3.ax1x.com/2020/12/06/DjfpuQ.png" alt="内部填充面积图"></p>
<h3 id="堆积面积图"><a href="#堆积面积图" class="headerlink" title="堆积面积图"></a>堆积面积图</h3><p>与层叠柱状图很像啊，不同之处在于数据的设定，对于个体来说数值得越来越大。</p>
<h2 id="直方图"><a href="#直方图" class="headerlink" title="直方图"></a>直方图</h2><h3 id="基本案例-3"><a href="#基本案例-3" class="headerlink" title="基本案例"></a>基本案例</h3><p>使用的函数是<code>graph_objs</code>里的<code>Histogram</code>函数。<br>把数据给参数x就是一般的直方图，给参数y就是水平直方图，默认的坐标是样本个数，通过设定<code>histnorm = &#39;probability&#39;</code>使其变为频率。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line">s1 = np.random.RandomState(<span class="number">1</span>)  </span><br><span class="line">x = s1.randn(<span class="number">1000</span>)   <span class="comment">#正态分布 1000个</span></span><br><span class="line"></span><br><span class="line">data = [go.Histogram(x=x, histnorm = <span class="string">&#x27;probability&#x27;</span>)] </span><br><span class="line">pyplt(data)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://s3.ax1x.com/2020/12/06/DjWqAI.png" alt="直方图简单案例"></p>
<h3 id="重叠直方图"><a href="#重叠直方图" class="headerlink" title="重叠直方图"></a>重叠直方图</h3><p>通过<code>barmode=&#39;overlay&#39;</code>设置。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line">s1 = np.random.RandomState(<span class="number">1</span>)  </span><br><span class="line">x0 = s1.randn(<span class="number">1000</span>)</span><br><span class="line">x1 = s1.chisquare(<span class="number">5</span>,<span class="number">1000</span>) <span class="comment">#上面是正态的，这是卡方的。</span></span><br><span class="line"></span><br><span class="line">trace1 = go.Histogram(</span><br><span class="line">    x = x0,</span><br><span class="line">    histnorm = <span class="string">&#x27;probability&#x27;</span>, <span class="comment">#显示频率</span></span><br><span class="line">    opacity = <span class="number">0.75</span></span><br><span class="line">)</span><br><span class="line">trace2 = go.Histogram(</span><br><span class="line">    x = x1,</span><br><span class="line">    histnorm = <span class="string">&#x27;probability&#x27;</span>,</span><br><span class="line">    opacity = <span class="number">0.75</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">data = [trace1, trace2]</span><br><span class="line">layout = go.Layout(barmode=<span class="string">&#x27;overlay&#x27;</span>)  <span class="comment">#在这里</span></span><br><span class="line">fig = go.Figure(data = data, layout = layout)</span><br><span class="line">pyplt(fig)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://s3.ax1x.com/2020/12/06/DjWLNt.png" alt="重叠直方图"></p>
<h3 id="层叠直方图"><a href="#层叠直方图" class="headerlink" title="层叠直方图"></a>层叠直方图</h3><p>通过<code>barmode=&#39;stack&#39;</code>设置。</p>
<p><img src="https://s3.ax1x.com/2020/12/06/DjWj9f.png" alt="层叠直方图"></p>
<h3 id="累积直方图"><a href="#累积直方图" class="headerlink" title="累积直方图"></a>累积直方图</h3><p>没有看到这个书上直方图关于颜色的参数，那我就试试之前的设置方法管用吗，结果是管用的，开心，不能光抄代码，必须动脑子。</p>
<p><img src="https://s3.ax1x.com/2020/12/06/DjWv38.png" alt="累积直方图+颜色"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line">s1 = np.random.RandomState(<span class="number">1</span>)</span><br><span class="line">x0 = s1.randn(<span class="number">1000</span>)</span><br><span class="line">x1 = s1.chisquare(<span class="number">5</span>,<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line">trace1 = [go.Histogram(</span><br><span class="line">    x = x0,</span><br><span class="line">    histnorm = <span class="string">&#x27;probability&#x27;</span>,</span><br><span class="line">    cumulative=<span class="built_in">dict</span>(enabled=<span class="literal">True</span>),</span><br><span class="line">    marker = <span class="built_in">dict</span>(</span><br><span class="line">        color = <span class="string">&#x27;rgb(50, 171, 96)&#x27;</span>,</span><br><span class="line">        line = <span class="built_in">dict</span>(</span><br><span class="line">            color = <span class="string">&#x27;rgb(50, 171, 96)&#x27;</span></span><br><span class="line">            ),</span><br><span class="line">    ),</span><br><span class="line">    opacity = <span class="number">0.75</span></span><br><span class="line">)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pyplt(trace1)</span><br></pre></td></tr></table></figure>
<p><code>cumulative=dict(enabled=True)</code>这是累积直方图的参数，有<code>enabled</code>(默认<code>false</code>则不进行累计)、<code>directio</code>(累积方向，越来越大或者越来越小)、<code>currentbin</code>(为了防止偏差，一般选择<code>half</code>)三个关键字。<br><code>xbins</code>设置划分区间属性，<code>start</code>是起始坐标，<code>end</code>是终止坐标，<code>size</code>是区间长度。</p>
<h3 id="难度应用案例"><a href="#难度应用案例" class="headerlink" title="难度应用案例"></a>难度应用案例</h3><p><img src="https://s3.ax1x.com/2020/12/06/DjWxgS.png" alt="直方图难度案例"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> plotly.figure_factory <span class="keyword">as</span> ff</span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s1 = np.random.RandomState(<span class="number">12</span>)</span><br><span class="line">x1 = s1.standard_cauchy(<span class="number">200</span>) - <span class="number">4</span>    <span class="comment"># 柯西分布</span></span><br><span class="line">x2 = s1.uniform(<span class="number">1</span>,<span class="number">10</span>,<span class="number">200</span>)           <span class="comment"># 泊松分布</span></span><br><span class="line">x3 = s1.standard_gamma(<span class="number">3</span>,<span class="number">200</span>) + <span class="number">4</span>   <span class="comment"># Gamma 分布</span></span><br><span class="line">x4 = s1.exponential(<span class="number">3</span>,<span class="number">200</span>) + <span class="number">8</span>      <span class="comment"># 指数分布</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">hist_data = [x1, x2, x3, x4]</span><br><span class="line"></span><br><span class="line">group_labels = [<span class="string">&#x27;Group 1&#x27;</span>, <span class="string">&#x27;Group 2&#x27;</span>, <span class="string">&#x27;Group 3&#x27;</span>, <span class="string">&#x27;Group 4&#x27;</span>]</span><br><span class="line">fig = ff.create_distplot(hist_data, group_labels, bin_size=<span class="number">4</span>) <span class="comment">#？？？</span></span><br><span class="line">pyplt(fig)</span><br></pre></td></tr></table></figure>
<p>怎么换了画图函数啊，<code>bin_size</code>我也没懂，随便试了试，好像进行了一些放缩。</p>
<h2 id="饼图"><a href="#饼图" class="headerlink" title="饼图"></a>饼图</h2><p>用的是<code>graph_objs</code>里的<code>pie</code>函数。他有两个常用参数，<code>values</code>用于赋给需要可视化的数据，<code>labels</code>表示不同数据对应的标签。</p>
<h3 id="基本饼图"><a href="#基本饼图" class="headerlink" title="基本饼图"></a>基本饼图</h3><p><img src="https://s3.ax1x.com/2020/12/06/DjH43R.png" alt="饼图案例"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line">labels = [<span class="string">&#x27;上海国际集团有限公司&#x27;</span>, <span class="string">&#x27;中国移动通信集团&#x27;</span>,</span><br><span class="line"> <span class="string">&#x27;富德生命人寿-传统&#x27;</span>, <span class="string">&#x27;富德生命人寿-资本金&#x27;</span>, <span class="string">&#x27;上海上国投资产管理有限公司&#x27;</span>]</span><br><span class="line">values = [<span class="number">4222533311</span>, <span class="number">4103763711</span>, <span class="number">2138028672</span>, <span class="number">1356332558</span>, <span class="number">1073516173</span>]</span><br><span class="line">colors = [<span class="string">&#x27;#104E8B&#x27;</span>, <span class="string">&#x27;#1874CD&#x27;</span>, <span class="string">&#x27;#1C86EE&#x27;</span>, <span class="string">&#x27;#6495ED&#x27;</span>]</span><br><span class="line"></span><br><span class="line">trace = [go.Pie(labels = labels, </span><br><span class="line">                values = values,</span><br><span class="line">                rotation = <span class="number">30</span>, <span class="comment">#旋转角度</span></span><br><span class="line">                opacity = <span class="number">1</span>,   </span><br><span class="line">                showlegend = <span class="literal">False</span>,   <span class="comment">#是否显示图例</span></span><br><span class="line">                pull = [<span class="number">0.1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],  <span class="comment">#用于设置组成饼图的各个扇形的突出程度</span></span><br><span class="line">                hoverinfo = <span class="string">&#x27;label+percent&#x27;</span>,  <span class="comment">#用户将鼠标移到数据上时显示的内容</span></span><br><span class="line">                textinfo = <span class="string">&#x27;percent&#x27;</span>, <span class="comment">#设置显示在扇形上的是具体数值textinfo = &#x27;value&#x27;还是这里的比例</span></span><br><span class="line">                textfont = <span class="built_in">dict</span>(size = <span class="number">30</span>, color = <span class="string">&#x27;white&#x27;</span>),</span><br><span class="line">                marker = <span class="built_in">dict</span>(colors = colors,  <span class="comment">#每个扇形的样式</span></span><br><span class="line">                                line = <span class="built_in">dict</span>(color = <span class="string">&#x27;#000000&#x27;</span>,  <span class="comment">#扇形边框</span></span><br><span class="line">                                            width = <span class="number">2</span>)))]</span><br><span class="line">fig = go.Figure(data = trace)</span><br><span class="line">pyplt(trace)</span><br></pre></td></tr></table></figure>
<h3 id="环形饼图"><a href="#环形饼图" class="headerlink" title="环形饼图"></a>环形饼图</h3><p><code>hole =  0.7</code>可以理解为控制中心空的也可以理解为图的胖瘦，这个值是1的时候，中心就不空了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">labels = [<span class="string">&#x27;完成&#x27;</span>,<span class="string">&#x27;未完成&#x27;</span>]</span><br><span class="line">values = [<span class="number">0.7</span>,<span class="number">0.3</span>]</span><br><span class="line">trace = [go.Pie(</span><br><span class="line">    labels = labels, </span><br><span class="line">    values = values, </span><br><span class="line">    hole =  <span class="number">0.7</span>,</span><br><span class="line">    hoverinfo = <span class="string">&quot;label + percent&quot;</span>)]</span><br><span class="line">layout = go.Layout(</span><br><span class="line">    title = <span class="string">&#x27;工作进度图&#x27;</span></span><br><span class="line">)</span><br><span class="line">fig = go.Figure(data = trace, layout = layout)</span><br><span class="line">pyplt(fig)</span><br></pre></td></tr></table></figure>

<p><img src="https://s3.ax1x.com/2020/12/06/DjH5g1.png" alt="环形饼图"></p>
<h3 id="高级案例"><a href="#高级案例" class="headerlink" title="高级案例"></a>高级案例</h3><p><img src="https://s3.ax1x.com/2020/12/06/DjHTu6.png" alt="饼图案例3"></p>
<p>学习一下数据的输入方式。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">pyplt = py.offline.iplot</span><br><span class="line">fig = &#123;</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;values&quot;</span>: [<span class="number">9884</span>, <span class="number">9510</span>, <span class="number">9363</span>, <span class="number">7961</span>, <span class="number">6755</span>],</span><br><span class="line">      <span class="string">&quot;labels&quot;</span>: [</span><br><span class="line">          <span class="string">&#x27;金瑞期货&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;海通期货&#x27;</span>, </span><br><span class="line">          <span class="string">&#x27;国泰君安&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;银河期货&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;五矿经易&#x27;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&#x27;domain&#x27;</span>: &#123;<span class="string">&#x27;x&#x27;</span>: [<span class="number">0</span>, <span class="number">.6</span>],</span><br><span class="line">                <span class="string">&#x27;y&#x27;</span>: [<span class="number">0</span>, <span class="number">.5</span>]&#125;,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;AU.SHF多头持仓&quot;</span>,</span><br><span class="line">      <span class="string">&quot;hoverinfo&quot;</span>:<span class="string">&quot;label + percent + name&quot;</span>,</span><br><span class="line">      <span class="string">&quot;hole&quot;</span>: <span class="number">.4</span>,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;pie&quot;</span></span><br><span class="line">    &#125;,     </span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;values&quot;</span>: [<span class="number">8847</span>, <span class="number">6229</span>, <span class="number">2764</span>, <span class="number">2406</span>, <span class="number">2022</span>],</span><br><span class="line">      <span class="string">&quot;labels&quot;</span>: [</span><br><span class="line">          <span class="string">&#x27;中信期货&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;招金期货&#x27;</span>, </span><br><span class="line">          <span class="string">&#x27;国贸期货&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;铜冠金源&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;中银国际&#x27;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&#x27;domain&#x27;</span>: &#123;<span class="string">&#x27;x&#x27;</span>: [<span class="number">.2</span>, <span class="number">1</span>],</span><br><span class="line">                <span class="string">&#x27;y&#x27;</span>: [<span class="number">0</span>, <span class="number">.5</span>]&#125;,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;AU.SHF空头持仓&quot;</span>,</span><br><span class="line">      <span class="string">&quot;hoverinfo&quot;</span>:<span class="string">&quot;label + percent + name&quot;</span>,</span><br><span class="line">      <span class="string">&quot;hole&quot;</span>: <span class="number">.4</span>,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;pie&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;values&quot;</span>: [<span class="number">14393</span>, <span class="number">12220</span>, <span class="number">11824</span>, <span class="number">11233</span>, <span class="number">10072</span>],</span><br><span class="line">      <span class="string">&quot;labels&quot;</span>: [</span><br><span class="line">          <span class="string">&#x27;中信期货&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;东证期货&#x27;</span>, </span><br><span class="line">          <span class="string">&#x27;海通期货&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;方正中期&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;国泰君安&#x27;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&#x27;domain&#x27;</span>: &#123;<span class="string">&#x27;x&#x27;</span>: [<span class="number">0</span>, <span class="number">.9</span>],</span><br><span class="line">                <span class="string">&#x27;y&#x27;</span>: [<span class="number">.5</span>, <span class="number">1</span>]&#125;,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;AG.SHF多头持仓&quot;</span>,</span><br><span class="line">      <span class="string">&quot;hoverinfo&quot;</span>:<span class="string">&quot;label + percent + name&quot;</span>,</span><br><span class="line">      <span class="string">&quot;hole&quot;</span>: <span class="number">.4</span>,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;pie&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;values&quot;</span>: [<span class="number">30983</span>, <span class="number">20699</span>, <span class="number">16781</span>, <span class="number">15686</span>, <span class="number">14198</span>],</span><br><span class="line">      <span class="string">&quot;labels&quot;</span>: [</span><br><span class="line">          <span class="string">&#x27;中信期货&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;国泰君安&#x27;</span>, </span><br><span class="line">          <span class="string">&#x27;海通期货&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;国贸期货&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;永安期货&#x27;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&#x27;domain&#x27;</span>: &#123;<span class="string">&#x27;x&#x27;</span>: [<span class="number">0.5</span>, <span class="number">1</span>],</span><br><span class="line">                <span class="string">&#x27;y&#x27;</span>: [<span class="number">.5</span>, <span class="number">1</span>]&#125;,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;AG.SHF空头持仓&quot;</span>,</span><br><span class="line">      <span class="string">&quot;hoverinfo&quot;</span>:<span class="string">&quot;label + percent + name&quot;</span>,</span><br><span class="line">      <span class="string">&quot;hole&quot;</span>: <span class="number">.4</span>,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;pie&quot;</span></span><br><span class="line">    &#125;],</span><br><span class="line">    </span><br><span class="line">  <span class="string">&quot;layout&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;title&quot;</span>:<span class="string">&quot;有色金属板块主力合约多空持仓分布图&quot;</span>,</span><br><span class="line">        <span class="string">&quot;annotations&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;font&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;size&quot;</span>: <span class="number">10</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&quot;showarrow&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">                <span class="string">&quot;text&quot;</span>: <span class="string">&quot;AU.SHF多头持仓&quot;</span>,</span><br><span class="line">                <span class="string">&quot;x&quot;</span>: <span class="number">0.45</span>,</span><br><span class="line">                <span class="string">&quot;y&quot;</span>: <span class="number">0.754</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;font&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;size&quot;</span>: <span class="number">10</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&quot;showarrow&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">                <span class="string">&quot;text&quot;</span>: <span class="string">&quot;AU.SHF空头持仓&quot;</span>,</span><br><span class="line">                <span class="string">&quot;x&quot;</span>: <span class="number">0.794</span>,</span><br><span class="line">                <span class="string">&quot;y&quot;</span>: <span class="number">0.754</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;font&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;size&quot;</span>: <span class="number">10</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&quot;showarrow&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">                <span class="string">&quot;text&quot;</span>: <span class="string">&quot;AG.SHF多头持仓&quot;</span>,</span><br><span class="line">                <span class="string">&quot;x&quot;</span>: <span class="number">0.255</span>,</span><br><span class="line">                <span class="string">&quot;y&quot;</span>: <span class="number">0.23</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;font&quot;</span>: &#123;</span><br><span class="line">                    <span class="string">&quot;size&quot;</span>: <span class="number">10</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="string">&quot;showarrow&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">                <span class="string">&quot;text&quot;</span>: <span class="string">&quot;AG.SHF空头持仓&quot;</span>,</span><br><span class="line">                <span class="string">&quot;x&quot;</span>: <span class="number">0.6</span>,</span><br><span class="line">                <span class="string">&quot;y&quot;</span>: <span class="number">0.23</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">pyplt(fig)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>这章主要是讲的单独的画图函数，主要是散点图、柱状图、线形图、条形图、直方图、饼图、面积图、甘特图。<br>可见<code>plotly</code>功能之强大，能做的图的种类就很多，估计后面还会讲到其他画图的方法，例如一个函数，不同的图修改其参数。<br>说到参数，这里面的参数有非常多，我觉得这需要在实战中记忆，一开始不需要对每个参数都进行修改，大可不必强迫症去学习全部的参数。仅从这一遍学习中，还是能感觉到用这个作图逻辑，其各个部分的作用，简单的需求应该修改哪里，而且对于不同的作图函数，其实大部分参数也是相通的。<br>学习，学习方法，形成逻辑，应用逻辑，学习方法。</p>
<pre><code>trace-&gt;layout-&gt;annotations-&gt;axis
&amp;字典</code></pre>
<h1 id="plotly高级图形"><a href="#plotly高级图形" class="headerlink" title="plotly高级图形"></a>plotly高级图形</h1><h2 id="时间序列"><a href="#时间序列" class="headerlink" title="时间序列"></a>时间序列</h2><p>本人没用过<code>python</code>做时间序列，统计类用<code>eviews</code>应该是更专业，这个我们来看一下写法吧。</p>
<p><img src="https://s3.ax1x.com/2020/12/10/rFojaR.png" alt="时序"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">x_datetime = [datetime(year=<span class="number">2013</span>, month=<span class="number">10</span>, day=<span class="number">4</span>),</span><br><span class="line">              datetime(year=<span class="number">2013</span>, month=<span class="number">11</span>, day=<span class="number">5</span>),</span><br><span class="line">              datetime(year=<span class="number">2013</span>, month=<span class="number">12</span>, day=<span class="number">6</span>)]</span><br><span class="line">x_string = [<span class="string">&#x27;2013-10-04&#x27;</span>, <span class="string">&#x27;2013-11-05&#x27;</span>, <span class="string">&#x27;2013-12-06&#x27;</span>]</span><br><span class="line"></span><br><span class="line">trace_datetime = go.Scatter(x=x_datetime, y=[<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>],name=<span class="string">&#x27;trace_datetime&#x27;</span>)</span><br><span class="line">trace_string = go.Scatter(x=x_string, y=[<span class="number">2</span>, <span class="number">4</span>, <span class="number">7</span>],name=<span class="string">&#x27;trace_string&#x27;</span>)</span><br><span class="line">data = [trace_datetime, trace_string]</span><br><span class="line">pyplt(data)</span><br></pre></td></tr></table></figure>

<h2 id="滑动选择控件"><a href="#滑动选择控件" class="headerlink" title="滑动选择控件"></a>滑动选择控件</h2><p>主要用在金融时序的绘图里，当需求是限定时间展示数据时，除了自己写个函数规范数据以外，还可以更为方便地实现，即修改<code>layout.xaxis.rangeselector</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">layout = <span class="built_in">dict</span>(</span><br><span class="line">    title=<span class="string">&#x27;时间序列的滑块与选择器&#x27;</span>,</span><br><span class="line">    xaxis=<span class="built_in">dict</span>(</span><br><span class="line">        rangeselector=<span class="built_in">dict</span>( <span class="comment"># 定义x轴的选择器</span></span><br><span class="line">            buttons=<span class="built_in">list</span>([ <span class="comment"># 选择器的按钮</span></span><br><span class="line">                <span class="built_in">dict</span>(count=<span class="number">1</span>, <span class="comment"># 覆盖范围 = count * step</span></span><br><span class="line">                     label=<span class="string">&#x27;1m&#x27;</span>, <span class="comment"># 选择器的标签</span></span><br><span class="line">                     step=<span class="string">&#x27;month&#x27;</span>,</span><br><span class="line">                     stepmode=<span class="string">&#x27;backward&#x27;</span>), <span class="comment"># 从后往前推进</span></span><br></pre></td></tr></table></figure>

<p>若设置<code>count=1,step=&#39;year&#39;,stepmode=&#39;todate&#39;</code>这里不是一直到今天，而是给定一个最后日期<code>20201208</code>则输出<code>20200101---20201208</code>，即最后日期的那年年初到最后日期。</p>
<p><img src="https://s3.ax1x.com/2020/12/10/rFozPx.png" alt="滑动块"></p>
<p>代码如下:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">r&#x27;C:\Users\ASUS\Desktop\python\Chapter03\dat/day01.csv&#x27;</span>,index_col=[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">data = [go.Scatter(x=df.index,</span><br><span class="line">                   y=df.close)]</span><br><span class="line"></span><br><span class="line">layout = <span class="built_in">dict</span>(</span><br><span class="line">    title=<span class="string">&#x27;时间序列的滑块与选择器&#x27;</span>,</span><br><span class="line">    xaxis=<span class="built_in">dict</span>(</span><br><span class="line">        rangeselector=<span class="built_in">dict</span>(</span><br><span class="line">            buttons=<span class="built_in">list</span>([</span><br><span class="line">                <span class="built_in">dict</span>(count=<span class="number">1</span>,</span><br><span class="line">                     label=<span class="string">&#x27;1m&#x27;</span>,</span><br><span class="line">                     step=<span class="string">&#x27;month&#x27;</span>,</span><br><span class="line">                     stepmode=<span class="string">&#x27;backward&#x27;</span>),</span><br><span class="line">                <span class="built_in">dict</span>(count=<span class="number">6</span>,</span><br><span class="line">                     label=<span class="string">&#x27;6m&#x27;</span>,</span><br><span class="line">                     step=<span class="string">&#x27;month&#x27;</span>,</span><br><span class="line">                     stepmode=<span class="string">&#x27;backward&#x27;</span>),</span><br><span class="line">                <span class="built_in">dict</span>(count=<span class="number">1</span>,</span><br><span class="line">                    label=<span class="string">&#x27;YTD&#x27;</span>,<span class="comment">#今天以来</span></span><br><span class="line">                    step=<span class="string">&#x27;year&#x27;</span>,</span><br><span class="line">                    stepmode=<span class="string">&#x27;todate&#x27;</span>),</span><br><span class="line">                <span class="built_in">dict</span>(count=<span class="number">1</span>,</span><br><span class="line">                    label=<span class="string">&#x27;1y&#x27;</span>,</span><br><span class="line">                    step=<span class="string">&#x27;year&#x27;</span>,</span><br><span class="line">                    stepmode=<span class="string">&#x27;backward&#x27;</span>),</span><br><span class="line">                <span class="built_in">dict</span>(step=<span class="string">&#x27;all&#x27;</span>)</span><br><span class="line">            ])</span><br><span class="line">        ),</span><br><span class="line">        rangeslider=<span class="built_in">dict</span>(),</span><br><span class="line">        <span class="built_in">type</span>=<span class="string">&#x27;date&#x27;</span></span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line">fig = <span class="built_in">dict</span>(data=data, layout=layout)</span><br><span class="line">pyplt(fig)</span><br></pre></td></tr></table></figure>
<h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><p><img src="https://s3.ax1x.com/2020/12/10/rFoXZ9.png" alt="表格"></p>
<p>本来我是觉得表格可以不用<code>plotly</code>，但是我看了后面内容发现，有的时候表图会一起展示，即有些情况下还是必要的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import plotly as py</span><br><span class="line">import plotly.figure_factory as FF</span><br><span class="line"></span><br><span class="line">pyplt &#x3D; py.offline.iplot</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data_matrix &#x3D; [[&#39;国家&#39;, &#39;年份&#39;, &#39;人口&#39;],</span><br><span class="line">               [&#39;中国&#39;,2000, 1267430000],</span><br><span class="line">               [&#39;美国&#39;, 2000, 282200000],</span><br><span class="line">               [&#39;加拿大&#39;, 2000, 27790000],</span><br><span class="line">               [&#39;中国&#39;, 2005, 1307560000],</span><br><span class="line">               [&#39;美国&#39;, 2005, 295500000],</span><br><span class="line">               [&#39;加拿大&#39;, 2005, 32310000],</span><br><span class="line">               [&#39;中国&#39;, 2010, 1340910000],</span><br><span class="line">               [&#39;美国&#39;, 2010, 309000000],</span><br><span class="line">               [&#39;加拿大&#39;, 2010, 34000000]]</span><br><span class="line"></span><br><span class="line">colorscale &#x3D; [[0, &#39;#4d004c&#39;], [.3, &#39;#f2e5ff&#39;], [1, &#39;#ffffff&#39;]]</span><br><span class="line">fontcolor &#x3D; [&#39;#FF0000&#39;, &#39;#00EE00&#39;, &#39;#FF3030&#39;]</span><br><span class="line"></span><br><span class="line">table &#x3D; FF.create_table(data_matrix) # data_matrix可直接换为用pandas读取的dataframe</span><br><span class="line">table.layout.width &#x3D; 700</span><br><span class="line">pyplt(table)</span><br></pre></td></tr></table></figure>
<p>这里的<code>colorscale和fontcolor</code>都有三个参数，不是三列或者什么的，而是表头(第一行和有索引的第一列)、奇数列、偶数列。</p>
<h2 id="表格与图"><a href="#表格与图" class="headerlink" title="表格与图"></a>表格与图</h2><p>艾西，不亏是18年版的书，这部分的两个代码都报错，搜了百度无果后，还是<a target="_blank" rel="noopener" href="https://plotly.com/python/figure-factory-subplots/">官网</a>解决了问题。<br>我发现哈，本书的例子中的变量名字和一些参数的设置和官网案例是如出一辙，就给换了下数据。<br>这是代码和作图结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> plotly.figure_factory <span class="keyword">as</span> ff</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加表格数据</span></span><br><span class="line">table_data = [[<span class="string">&#x27;团队&#x27;</span>, <span class="string">&#x27;赢&#x27;</span>, <span class="string">&#x27;输&#x27;</span>, <span class="string">&#x27;平&#x27;</span>],</span><br><span class="line">              [<span class="string">&#x27;清华大学&#x27;</span>, <span class="number">18</span>, <span class="number">4</span>, <span class="number">0</span>],</span><br><span class="line">              [<span class="string">&#x27;北京大学&#x27;</span>, <span class="number">18</span>, <span class="number">5</span>, <span class="number">0</span>],</span><br><span class="line">              [<span class="string">&#x27;中国&lt;br&gt;人民大学&#x27;</span>, <span class="number">16</span>, <span class="number">5</span>, <span class="number">0</span>],</span><br><span class="line">              [<span class="string">&#x27;复旦大学&#x27;</span>, <span class="number">13</span>, <span class="number">8</span>, <span class="number">0</span>],</span><br><span class="line">              [<span class="string">&#x27;上海&lt;br&gt;交通大学&#x27;</span>, <span class="number">13</span>, <span class="number">8</span>, <span class="number">0</span>],</span><br><span class="line">              [<span class="string">&#x27;同济大学&#x27;</span>, <span class="number">13</span>, <span class="number">8</span>, <span class="number">0</span>]]</span><br><span class="line"><span class="comment"># 通过 ff.create_table(table_data)来初始化一个figure</span></span><br><span class="line">fig = ff.create_table(table_data, height_constant=<span class="number">60</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加绘图数据</span></span><br><span class="line">teams = [<span class="string">&#x27;清华大学&#x27;</span>, <span class="string">&#x27;北京大学&#x27;</span>, <span class="string">&#x27;中国&lt;br&gt;人民大学&#x27;</span>,</span><br><span class="line">         <span class="string">&#x27;复旦大学&#x27;</span>, <span class="string">&#x27;上海&lt;br&gt;交通大学&#x27;</span>, <span class="string">&#x27;同济大学&#x27;</span>]</span><br><span class="line">scoreA = [<span class="number">3.54</span>, <span class="number">3.48</span>, <span class="number">3.0</span>, <span class="number">3.27</span>, <span class="number">2.83</span>, <span class="number">2.45</span>]</span><br><span class="line">scoreB = [<span class="number">2.17</span>, <span class="number">2.57</span>, <span class="number">2.0</span>, <span class="number">2.91</span>, <span class="number">2.57</span>, <span class="number">2.14</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对绘图添加 traces</span></span><br><span class="line">fig.add_trace(go.Bar(x=teams, y=scoreA, xaxis=<span class="string">&#x27;x2&#x27;</span>, yaxis=<span class="string">&#x27;y2&#x27;</span>,</span><br><span class="line">                marker=<span class="built_in">dict</span>(color=<span class="string">&#x27;#0099ff&#x27;</span>),</span><br><span class="line">                name=<span class="string">&#x27;分值A&#x27;</span>))</span><br><span class="line">fig.add_trace(go.Bar(x=teams, y=scoreB, xaxis=<span class="string">&#x27;x2&#x27;</span>, yaxis=<span class="string">&#x27;y2&#x27;</span>,</span><br><span class="line">                marker=<span class="built_in">dict</span>(color=<span class="string">&#x27;#404040&#x27;</span>),</span><br><span class="line">                name=<span class="string">&#x27;分值B&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 figure 的 layout</span></span><br><span class="line"><span class="comment"># 图的 yaxis 要与图的 xaxis 对应</span></span><br><span class="line"><span class="comment"># 设置figure的边界</span></span><br><span class="line"></span><br><span class="line">fig.update_layout(</span><br><span class="line">    title_text = <span class="string">&#x27;部分高校游戏比赛&#x27;</span>,</span><br><span class="line">    height = <span class="number">800</span>,</span><br><span class="line">    margin = &#123;<span class="string">&#x27;t&#x27;</span>:<span class="number">75</span>, <span class="string">&#x27;l&#x27;</span>:<span class="number">50</span>&#125;, <span class="comment"># top left 距离..多少个单位</span></span><br><span class="line">    yaxis = &#123;<span class="string">&#x27;domain&#x27;</span>: [<span class="number">0</span>, <span class="number">.45</span>]&#125;,</span><br><span class="line">    xaxis2 = &#123;<span class="string">&#x27;anchor&#x27;</span>: <span class="string">&#x27;y2&#x27;</span>&#125;,</span><br><span class="line">    yaxis2 = &#123;<span class="string">&#x27;domain&#x27;</span>: [<span class="number">.6</span>, <span class="number">1</span>], <span class="string">&#x27;anchor&#x27;</span>: <span class="string">&#x27;x2&#x27;</span>, <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;分值&#x27;</span>&#125; <span class="comment">#让yaxis坐标轴与xaxis对应</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<p><img src="https://s3.ax1x.com/2020/12/10/rFoLqJ.png" alt="表图合一"></p>
<p>上面这是放在一列了，如果想把表和图放在一行哈，就需要修改：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fig.update_layout(</span><br><span class="line">    margin = &#123;<span class="string">&#x27;t&#x27;</span>:<span class="number">50</span>, <span class="string">&#x27;b&#x27;</span>:<span class="number">100</span>&#125;,</span><br><span class="line">    xaxis = &#123;<span class="string">&#x27;domain&#x27;</span>: [<span class="number">0</span>, <span class="number">.45</span>]&#125;, <span class="comment"># 看这里，行</span></span><br><span class="line">    xaxis2 = &#123;<span class="string">&#x27;domain&#x27;</span>: [<span class="number">0.6</span>, <span class="number">1.</span>]&#125;, <span class="comment"># 看这里，行</span></span><br><span class="line">    yaxis2 = &#123;<span class="string">&#x27;anchor&#x27;</span>: <span class="string">&#x27;x2&#x27;</span>,<span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;分值&#x27;</span>&#125;, </span><br><span class="line">    title_text = <span class="string">&#x27;高校游戏比赛&#x27;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="多图表"><a href="#多图表" class="headerlink" title="多图表"></a>多图表</h2><p>比如一个图里，既有柱状图也有折线图。</p>
<p><img src="https://s3.ax1x.com/2020/12/10/rFoqr4.png" alt="多图表"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">x = <span class="built_in">list</span>(<span class="string">&#x27;ABCDEF&#x27;</span>)</span><br><span class="line">trace1 = go.Scatter(</span><br><span class="line">    x=x,</span><br><span class="line">    y=[<span class="number">1.5</span>, <span class="number">1</span>, <span class="number">1.3</span>, <span class="number">0.7</span>, <span class="number">0.8</span>, <span class="number">0.9</span>],</span><br><span class="line">    name=<span class="string">&#x27;line&#x27;</span></span><br><span class="line">)</span><br><span class="line">trace2 = go.Bar(</span><br><span class="line">    x=x,</span><br><span class="line">    y=[<span class="number">1</span>, <span class="number">0.5</span>, <span class="number">0.7</span>, <span class="number">-1.2</span>, <span class="number">0.3</span>, <span class="number">0.4</span>],</span><br><span class="line">    name = <span class="string">&#x27;bar&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">data = [trace1, trace2]</span><br><span class="line"></span><br><span class="line">layout = <span class="built_in">dict</span>(title = <span class="string">&#x27;Bar-Line Demo&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fig = <span class="built_in">dict</span>(data=data,layout=layout)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pyplt(data, show_link=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<h3 id="双坐标轴"><a href="#双坐标轴" class="headerlink" title="双坐标轴"></a>双坐标轴</h3><p>就像<code>excel</code>那个功能一样。</p>
<p>注意看<code>layout</code>的<code>yaxis</code>和<code>yaxis2</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">trace1 = go.Scatter(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">    y=[<span class="number">400</span>, <span class="number">500</span>, <span class="number">600</span>],</span><br><span class="line">    name=<span class="string">&#x27;yaxis 数据&#x27;</span></span><br><span class="line">)</span><br><span class="line">trace2 = go.Scatter(</span><br><span class="line">    x=[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">    y=[<span class="number">47</span>, <span class="number">52</span>, <span class="number">16</span>],</span><br><span class="line">    name=<span class="string">&#x27;yaxis2 数据&#x27;</span>,</span><br><span class="line">    yaxis=<span class="string">&#x27;y2&#x27;</span></span><br><span class="line">)</span><br><span class="line">data = [trace1, trace2]</span><br><span class="line">layout = go.Layout(</span><br><span class="line">    title=<span class="string">&#x27;Y轴双轴示例&#x27;</span>,</span><br><span class="line">    yaxis=<span class="built_in">dict</span>(</span><br><span class="line">        title=<span class="string">&#x27;yaxis 标题&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    yaxis2=<span class="built_in">dict</span>(</span><br><span class="line">        title=<span class="string">&#x27;yaxis2 标题&#x27;</span>,</span><br><span class="line">        titlefont=<span class="built_in">dict</span>(</span><br><span class="line">            color=<span class="string">&#x27;rgb(148, 103, 189)&#x27;</span> <span class="comment"># 标题颜色</span></span><br><span class="line">        ),</span><br><span class="line">        tickfont=<span class="built_in">dict</span>(</span><br><span class="line">            color=<span class="string">&#x27;rgb(148, 103, 189)&#x27;</span> <span class="comment"># 刻度颜色</span></span><br><span class="line">        ),</span><br><span class="line">        overlaying=<span class="string">&#x27;y&#x27;</span>, <span class="comment"># 覆盖y轴</span></span><br><span class="line">        side=<span class="string">&#x27;right&#x27;</span> <span class="comment"># 坐标轴的位置</span></span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line">fig = go.Figure(data=data, layout=layout)</span><br><span class="line">plot_url = pyplt(fig)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://s3.ax1x.com/2020/12/10/rFo7xU.png" alt="双坐标轴"></p>
<h3 id="多坐标轴"><a href="#多坐标轴" class="headerlink" title="多坐标轴"></a>多坐标轴</h3><p>多坐标轴类似这个，不多赘述。</p>
<h3 id="共享坐标轴"><a href="#共享坐标轴" class="headerlink" title="共享坐标轴"></a>共享坐标轴</h3><p>看图：</p>
<p><img src="https://s3.ax1x.com/2020/12/10/rFoT2T.png" alt="共享坐标轴"></p>
<p>应该不难理解的：上例的情况就是x的范围变动不大， 但是y轴的波动范围特别大，所以就这样展示了，实际应用中肯定有许多交集情况出现。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">trace1 = go.Scatter(</span><br><span class="line">    x=[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">    y=[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]</span><br><span class="line">)</span><br><span class="line">trace2 = go.Scatter(</span><br><span class="line">    x=[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">    y=[<span class="number">100</span>, <span class="number">110</span>, <span class="number">120</span>],</span><br><span class="line">    yaxis=<span class="string">&#x27;y2&#x27;</span></span><br><span class="line">)</span><br><span class="line">trace3 = go.Scatter(</span><br><span class="line">    x=[<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">    y=[<span class="number">1000</span>, <span class="number">1100</span>, <span class="number">1200</span>],</span><br><span class="line">    yaxis=<span class="string">&#x27;y3&#x27;</span></span><br><span class="line">)</span><br><span class="line">data = [trace1, trace2, trace3]</span><br><span class="line">layout = go.Layout(</span><br><span class="line">    yaxis=<span class="built_in">dict</span>(</span><br><span class="line">        domain=[<span class="number">0</span>, <span class="number">0.33</span>] <span class="comment"># 1范围</span></span><br><span class="line">    ),</span><br><span class="line">    legend=<span class="built_in">dict</span>(</span><br><span class="line">        traceorder=<span class="string">&#x27;reversed&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    yaxis2=<span class="built_in">dict</span>(</span><br><span class="line">        domain=[<span class="number">0.33</span>, <span class="number">0.66</span>] <span class="comment"># 2范围</span></span><br><span class="line">    ),</span><br><span class="line">    yaxis3=<span class="built_in">dict</span>(</span><br><span class="line">        domain=[<span class="number">0.66</span>, <span class="number">1</span>] <span class="comment"># 3范围</span></span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line">fig = go.Figure(data=data, layout=layout)</span><br><span class="line">pyplt(fig)</span><br></pre></td></tr></table></figure>
<h2 id="多子图"><a href="#多子图" class="headerlink" title="多子图"></a>多子图</h2><p>看到这里，虽然多子图单独拿出来做了一节，但是之前已经给了两种方法做这个多子图了。</p>
<p>这里也展示两种方法，然后是一个高阶的布局方法。</p>
<p>最后还会有R的多子图展示(跟plotly无关，只是觉得也很好看)</p>
<h3 id="法一"><a href="#法一" class="headerlink" title="法一"></a>法一</h3><p>用<code>make_subplots</code></p>
<p><img src="https://s3.ax1x.com/2020/12/10/rFoIP0.png" alt="method1"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> plotly <span class="keyword">import</span> tools</span><br><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">trace1 = go.Scatter(x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">                    y=[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">                    mode=<span class="string">&#x27;markers+text+lines&#x27;</span>,</span><br><span class="line">                    text=[<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>],</span><br><span class="line">                    textposition=<span class="string">&#x27;bottom center&#x27;</span></span><br><span class="line">                    )</span><br><span class="line">trace2 = go.Scatter(x=[<span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>],y=[<span class="number">50</span>, <span class="number">60</span>, <span class="number">70</span>])</span><br><span class="line">trace3 = go.Scatter(x=[<span class="number">300</span>, <span class="number">400</span>, <span class="number">500</span>],</span><br><span class="line">                    y=[<span class="number">600</span>, <span class="number">700</span>, <span class="number">800</span>],</span><br><span class="line">                    mode=<span class="string">&#x27;markers+text+lines&#x27;</span>,</span><br><span class="line">                    text=[<span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;F&#x27;</span>],</span><br><span class="line">                    textposition=<span class="string">&#x27;bottom center&#x27;</span></span><br><span class="line">                    )</span><br><span class="line">trace4 = go.Scatter(x=[<span class="number">4000</span>, <span class="number">5000</span>, <span class="number">6000</span>], y=[<span class="number">7000</span>, <span class="number">8000</span>, <span class="number">9000</span>])</span><br><span class="line"></span><br><span class="line">fig = tools.make_subplots(rows=<span class="number">2</span>, cols=<span class="number">2</span>, subplot_titles=(<span class="string">&#x27;Plot 1&#x27;</span>, <span class="string">&#x27;Plot 2&#x27;</span>,</span><br><span class="line">                                                          <span class="string">&#x27;Plot 3&#x27;</span>, <span class="string">&#x27;Plot 4&#x27;</span>))</span><br><span class="line"></span><br><span class="line">fig.append_trace(trace1, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">fig.append_trace(trace2, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">fig.append_trace(trace3, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">fig.append_trace(trace4, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">fig[<span class="string">&#x27;layout&#x27;</span>].update(height=<span class="number">600</span>, width=<span class="number">1000</span>, title=<span class="string">&#x27;Multiple Subplots2&#x27;</span>)</span><br><span class="line"></span><br><span class="line">pyplt(fig)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="法二"><a href="#法二" class="headerlink" title="法二"></a>法二</h3><p>本来先贴了代码，做到后面突然发现对<code>anchor</code>的理解不是很深刻，所以又回来找了个案例特地来说明，所以把代码放文字后面了。</p>
<p><img src="https://s3.ax1x.com/2020/12/10/rFhtTx.png" alt="正确版"></p>
<p>这里我觉得应该重点理解一下<code>anchor</code>，我一开始对这个参数指代什么非常不明白。但是当我把几个<code>anchor</code>都注释掉后，就能看懂一些了。<br><strong>这个参数的本意是需要绑定的坐标轴。</strong><br>都注释掉后，图是这样的：</p>
<p><img src="https://s3.ax1x.com/2020/12/10/rFWqrn.png" alt="step1"></p>
<p>这个图说明，默认绘制的坐标轴是<code>x1 y1 x2 y3</code>，那么我们修改一下代码，让每个图都绑定一个坐标轴是不是就好了？这是代码:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">xaxis=<span class="built_in">dict</span>(</span><br><span class="line">    domain=[<span class="number">0</span>, <span class="number">0.45</span>],</span><br><span class="line">    anchor = <span class="string">&#x27;y1&#x27;</span></span><br><span class="line">),</span><br><span class="line">xaxis2=<span class="built_in">dict</span>(</span><br><span class="line">    domain=[<span class="number">0.55</span>, <span class="number">1</span>],</span><br><span class="line">    anchor = <span class="string">&#x27;y2&#x27;</span></span><br><span class="line">),</span><br><span class="line">xaxis3=<span class="built_in">dict</span>(</span><br><span class="line">    domain=[<span class="number">0</span>, <span class="number">0.45</span>],</span><br><span class="line">    anchor=<span class="string">&#x27;y3&#x27;</span></span><br><span class="line">),</span><br><span class="line">xaxis4=<span class="built_in">dict</span>(</span><br><span class="line">    domain=[<span class="number">0.55</span>, <span class="number">1</span>],</span><br><span class="line">    anchor=<span class="string">&#x27;y4&#x27;</span></span><br><span class="line">),</span><br></pre></td></tr></table></figure>

<p>这是效果：</p>
<p><img src="https://s3.ax1x.com/2020/12/10/rFWLbq.png" alt="step2"></p>
<p>奇怪的是坐标轴的显示还是不正确。<br>那我们这样想，把图上的坐标轴分成两类，一种是默认给固定好的，一种是默认没有的。所以我们是不是应该对没有正确显示的坐标轴进行绑定，而绑定的就应该对应固定好的那个轴。<br>需要绑定的是<code>y2 x3 x4 y4</code>，那么对应地应该绑定谁呢？<code>x2 y3 y4 x4</code>。<br>代码确实是这样的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">trace1 = go.Scatter(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">    y=[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">)</span><br><span class="line">trace2 = go.Scatter(</span><br><span class="line">    x=[<span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>],</span><br><span class="line">    y=[<span class="number">50</span>, <span class="number">60</span>, <span class="number">70</span>],</span><br><span class="line">    xaxis=<span class="string">&#x27;x2&#x27;</span>,</span><br><span class="line">    yaxis=<span class="string">&#x27;y2&#x27;</span></span><br><span class="line">)</span><br><span class="line">trace3 = go.Scatter(</span><br><span class="line">    x=[<span class="number">300</span>, <span class="number">400</span>, <span class="number">500</span>],</span><br><span class="line">    y=[<span class="number">600</span>, <span class="number">700</span>, <span class="number">800</span>],</span><br><span class="line">    xaxis=<span class="string">&#x27;x3&#x27;</span>,</span><br><span class="line">    yaxis=<span class="string">&#x27;y3&#x27;</span></span><br><span class="line">)</span><br><span class="line">trace4 = go.Scatter(</span><br><span class="line">    x=[<span class="number">4000</span>, <span class="number">5000</span>, <span class="number">6000</span>],</span><br><span class="line">    y=[<span class="number">7000</span>, <span class="number">8000</span>, <span class="number">9000</span>],</span><br><span class="line">    xaxis=<span class="string">&#x27;x4&#x27;</span>,</span><br><span class="line">    yaxis=<span class="string">&#x27;y4&#x27;</span></span><br><span class="line">)</span><br><span class="line">data = [trace1, trace2, trace3, trace4]</span><br><span class="line">layout = go.Layout(</span><br><span class="line">    xaxis=<span class="built_in">dict</span>(</span><br><span class="line">        domain=[<span class="number">0</span>, <span class="number">0.45</span>]</span><br><span class="line">    ),</span><br><span class="line">    xaxis2=<span class="built_in">dict</span>(</span><br><span class="line">        domain=[<span class="number">0.55</span>, <span class="number">1</span>]</span><br><span class="line">    ),</span><br><span class="line">    xaxis3=<span class="built_in">dict</span>(</span><br><span class="line">        domain=[<span class="number">0</span>, <span class="number">0.45</span>],</span><br><span class="line">        anchor=<span class="string">&#x27;y3&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    xaxis4=<span class="built_in">dict</span>(</span><br><span class="line">        domain=[<span class="number">0.55</span>, <span class="number">1</span>],</span><br><span class="line">        anchor=<span class="string">&#x27;y4&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    yaxis=<span class="built_in">dict</span>(</span><br><span class="line">        domain=[<span class="number">0</span>, <span class="number">0.45</span>]</span><br><span class="line">    ),</span><br><span class="line">    yaxis2=<span class="built_in">dict</span>(</span><br><span class="line">        domain=[<span class="number">0</span>, <span class="number">0.45</span>],</span><br><span class="line">        anchor=<span class="string">&#x27;x2&#x27;</span></span><br><span class="line">    ),</span><br><span class="line">    yaxis3=<span class="built_in">dict</span>(</span><br><span class="line">        domain=[<span class="number">0.55</span>, <span class="number">1</span>]</span><br><span class="line">    ),</span><br><span class="line">    yaxis4=<span class="built_in">dict</span>(</span><br><span class="line">        domain=[<span class="number">0.55</span>, <span class="number">1</span>],</span><br><span class="line">        anchor=<span class="string">&#x27;x4&#x27;</span></span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line">fig = go.Figure(data=data, layout=layout)</span><br><span class="line">pyplt(fig)</span><br></pre></td></tr></table></figure>
<h3 id="高阶布局"><a href="#高阶布局" class="headerlink" title="高阶布局"></a>高阶布局</h3><p>先看下下面这个代码，布局还是用的法一，但是需要加个<code>specs</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fig &#x3D; tools.make_subplots(rows&#x3D;2, cols&#x3D;2, specs&#x3D;[[&#123;&#125;, &#123;&#125;], </span><br><span class="line">                                                 [&#123;&#39;colspan&#39;: 2&#125;, None]],</span><br><span class="line">                          subplot_titles&#x3D;(&#39;First Subplot&#39;,&#39;Second Subplot&#39;, &#39;Third Subplot&#39;))</span><br></pre></td></tr></table></figure>

<p>这个<code>specs</code>是个<code>[]</code>，里面还有俩<code>[]</code>，里面这个<code>[]</code>有几行就有几个；里面的<code>&#123;&#125;</code>，有几列就有几个。</p>
<p>然后下面是一个更为复杂的应用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> plotly <span class="keyword">import</span> tools</span><br><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">trace1 = go.Scatter(x=[<span class="number">1</span>, <span class="number">2</span>], y=[<span class="number">1</span>, <span class="number">2</span>], name=<span class="string">&#x27;(1,1)&#x27;</span>)</span><br><span class="line">trace2 = go.Scatter(x=[<span class="number">1</span>, <span class="number">2</span>], y=[<span class="number">1</span>, <span class="number">2</span>], name=<span class="string">&#x27;(1,2)&#x27;</span>)</span><br><span class="line">trace3 = go.Scatter(x=[<span class="number">1</span>, <span class="number">2</span>], y=[<span class="number">1</span>, <span class="number">2</span>], name=<span class="string">&#x27;(2,1)&#x27;</span>)</span><br><span class="line">trace4 = go.Scatter(x=[<span class="number">1</span>, <span class="number">2</span>], y=[<span class="number">1</span>, <span class="number">2</span>], name=<span class="string">&#x27;(3,1)&#x27;</span>)</span><br><span class="line">trace5 = go.Scatter(x=[<span class="number">1</span>, <span class="number">2</span>], y=[<span class="number">1</span>, <span class="number">2</span>], name=<span class="string">&#x27;(5,1)&#x27;</span>)</span><br><span class="line">trace6 = go.Scatter(x=[<span class="number">1</span>, <span class="number">2</span>], y=[<span class="number">1</span>, <span class="number">2</span>], name=<span class="string">&#x27;(5,2)&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fig = tools.make_subplots(rows=<span class="number">5</span>, cols=<span class="number">2</span>,</span><br><span class="line">                          specs=[[&#123;&#125;, &#123;<span class="string">&#x27;rowspan&#x27;</span>: <span class="number">2</span>&#125;],</span><br><span class="line">                                 [&#123;&#125;, <span class="literal">None</span>],</span><br><span class="line">                                 [&#123;<span class="string">&#x27;rowspan&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;colspan&#x27;</span>: <span class="number">2</span>&#125;, <span class="literal">None</span>],</span><br><span class="line">                                 [<span class="literal">None</span>, <span class="literal">None</span>],</span><br><span class="line">                                 [&#123;&#125;, &#123;&#125;]],</span><br><span class="line">                          print_grid=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">fig.append_trace(trace1, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">fig.append_trace(trace2, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">fig.append_trace(trace3, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">fig.append_trace(trace4, <span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line">fig.append_trace(trace5, <span class="number">5</span>, <span class="number">1</span>)</span><br><span class="line">fig.append_trace(trace6, <span class="number">5</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">fig[<span class="string">&#x27;layout&#x27;</span>].update(height=<span class="number">600</span>, width=<span class="number">1000</span>, title=<span class="string">&#x27;specs examples&#x27;</span>)</span><br><span class="line">pyplt(fig)</span><br></pre></td></tr></table></figure>

<p><img src="https://s3.ax1x.com/2020/12/10/rFooGV.png" alt="高阶布局"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">specs=[[&#123;&#125;, &#123;<span class="string">&#x27;rowspan&#x27;</span>: <span class="number">2</span>&#125;],</span><br><span class="line">      [&#123;&#125;, <span class="literal">None</span>],</span><br><span class="line">      [&#123;<span class="string">&#x27;rowspan&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;colspan&#x27;</span>: <span class="number">2</span>&#125;, <span class="literal">None</span>],</span><br><span class="line">      [<span class="literal">None</span>, <span class="literal">None</span>],</span><br><span class="line">      [&#123;&#125;, &#123;&#125;]],</span><br></pre></td></tr></table></figure>

<p>对应上图看这个<code>specs</code>，<code>None</code>就是不作图了。</p>
<h2 id="子图共享坐标轴"><a href="#子图共享坐标轴" class="headerlink" title="子图共享坐标轴"></a>子图共享坐标轴</h2><p>感觉这一节很难去说，这应该是一个熟悉的技巧，所以仅展示一个例子，大概看一下。</p>
<p><strong>这是两个坐标轴都共享的情况。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> plotly <span class="keyword">import</span> tools</span><br><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">trace1 = go.Scatter(</span><br><span class="line">    x=[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">    y=[<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]</span><br><span class="line">)</span><br><span class="line">trace2 = go.Scatter(</span><br><span class="line">    x=[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">    y=[<span class="number">100</span>, <span class="number">110</span>, <span class="number">120</span>],</span><br><span class="line">)</span><br><span class="line">trace3 = go.Scatter(</span><br><span class="line">    x=[<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">    y=[<span class="number">1000</span>, <span class="number">1100</span>, <span class="number">1200</span>],</span><br><span class="line">)</span><br><span class="line">fig = tools.make_subplots(rows=<span class="number">3</span>, cols=<span class="number">1</span>, specs=[[&#123;&#125;], [&#123;&#125;], [&#123;&#125;]], <span class="comment"># 感觉这个specs是不是可以不加啊</span></span><br><span class="line">                          shared_xaxes=<span class="literal">True</span>, shared_yaxes=<span class="literal">True</span>,</span><br><span class="line">                          vertical_spacing=<span class="number">0.001</span>)</span><br><span class="line">fig.append_trace(trace1, <span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line">fig.append_trace(trace2, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">fig.append_trace(trace3, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">fig[<span class="string">&#x27;layout&#x27;</span>].update(height=<span class="number">600</span>, width=<span class="number">600</span>, title=<span class="string">&#x27;Stacked Subplots with Shared X-Axes&#x27;</span>)</span><br><span class="line">pyplt(fig)</span><br></pre></td></tr></table></figure>

<p><img src="https://s3.ax1x.com/2020/12/10/rFogKg.png" alt="子图共享坐标轴"></p>
<h2 id="子图坐标轴自定义"><a href="#子图坐标轴自定义" class="headerlink" title="子图坐标轴自定义"></a>子图坐标轴自定义</h2><p><img src="https://s3.ax1x.com/2020/12/10/rFohan.png" alt="子图坐标轴自定义"></p>
<p>这些个例子非常容易看懂。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> plotly <span class="keyword">import</span> tools</span><br><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">trace1 = go.Scatter(x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], y=[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line">trace2 = go.Scatter(x=[<span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>], y=[<span class="number">50</span>, <span class="number">60</span>, <span class="number">70</span>])</span><br><span class="line">trace3 = go.Scatter(x=[<span class="number">300</span>, <span class="number">400</span>, <span class="number">500</span>], y=[<span class="number">600</span>, <span class="number">700</span>, <span class="number">800</span>])</span><br><span class="line">trace4 = go.Scatter(x=[<span class="number">4000</span>, <span class="number">5000</span>, <span class="number">6000</span>], y=[<span class="number">7000</span>, <span class="number">8000</span>, <span class="number">9000</span>])</span><br><span class="line"></span><br><span class="line">fig = tools.make_subplots(rows=<span class="number">2</span>, cols=<span class="number">2</span>, subplot_titles=(<span class="string">&#x27;Plot 1&#x27;</span>, <span class="string">&#x27;Plot 2&#x27;</span>,</span><br><span class="line">                                                          <span class="string">&#x27;Plot 3&#x27;</span>, <span class="string">&#x27;Plot 4&#x27;</span>))</span><br><span class="line">fig.append_trace(trace1, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">fig.append_trace(trace2, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">fig.append_trace(trace3, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">fig.append_trace(trace4, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">fig[<span class="string">&#x27;layout&#x27;</span>][<span class="string">&#x27;xaxis1&#x27;</span>].update(title=<span class="string">&#x27;xaxis 1 title&#x27;</span>)</span><br><span class="line">fig[<span class="string">&#x27;layout&#x27;</span>][<span class="string">&#x27;xaxis2&#x27;</span>].update(title=<span class="string">&#x27;xaxis 2 title&#x27;</span>, <span class="built_in">range</span>=[<span class="number">10</span>, <span class="number">50</span>])  <span class="comment"># 横坐标的范围</span></span><br><span class="line">fig[<span class="string">&#x27;layout&#x27;</span>][<span class="string">&#x27;xaxis3&#x27;</span>].update(title=<span class="string">&#x27;xaxis 3 title&#x27;</span>, showgrid=<span class="literal">False</span>) <span class="comment"># 关掉网格线</span></span><br><span class="line">fig[<span class="string">&#x27;layout&#x27;</span>][<span class="string">&#x27;xaxis4&#x27;</span>].update(title=<span class="string">&#x27;xaxis 4 title&#x27;</span>, <span class="built_in">type</span>=<span class="string">&#x27;log&#x27;</span>) <span class="comment"># 不知道</span></span><br><span class="line"></span><br><span class="line">fig[<span class="string">&#x27;layout&#x27;</span>][<span class="string">&#x27;yaxis1&#x27;</span>].update(title=<span class="string">&#x27;yaxis 1 title&#x27;</span>)</span><br><span class="line">fig[<span class="string">&#x27;layout&#x27;</span>][<span class="string">&#x27;yaxis2&#x27;</span>].update(title=<span class="string">&#x27;yaxis 2 title&#x27;</span>, <span class="built_in">range</span>=[<span class="number">40</span>, <span class="number">80</span>])</span><br><span class="line">fig[<span class="string">&#x27;layout&#x27;</span>][<span class="string">&#x27;yaxis3&#x27;</span>].update(title=<span class="string">&#x27;yaxis 3 title&#x27;</span>, showgrid=<span class="literal">False</span>)</span><br><span class="line">fig[<span class="string">&#x27;layout&#x27;</span>][<span class="string">&#x27;yaxis4&#x27;</span>].update(title=<span class="string">&#x27;yaxis 4 title&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fig[<span class="string">&#x27;layout&#x27;</span>].update(title=<span class="string">&#x27;Customizing Subplot Axes&#x27;</span>)</span><br><span class="line"></span><br><span class="line">pyplt(fig)</span><br></pre></td></tr></table></figure>

<h2 id="嵌入式子图"><a href="#嵌入式子图" class="headerlink" title="嵌入式子图"></a>嵌入式子图</h2><p>方法就是用<code>domain</code>控制范围，所以说学以致用非常重要。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">trace1 = go.Scatter(</span><br><span class="line">    x=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">    y=[<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]</span><br><span class="line">)</span><br><span class="line">trace2 = go.Scatter(</span><br><span class="line">    x=[<span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>],</span><br><span class="line">    y=[<span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>],</span><br><span class="line">    xaxis=<span class="string">&#x27;x2&#x27;</span>,</span><br><span class="line">    yaxis=<span class="string">&#x27;y2&#x27;</span></span><br><span class="line">)</span><br><span class="line">data = [trace1, trace2]</span><br><span class="line">layout = go.Layout(</span><br><span class="line">    xaxis2=<span class="built_in">dict</span>(</span><br><span class="line">        domain=[<span class="number">0.6</span>, <span class="number">0.95</span>],</span><br><span class="line">        anchor=<span class="string">&#x27;y2&#x27;</span>,</span><br><span class="line">        showgrid=<span class="literal">False</span></span><br><span class="line">    ),</span><br><span class="line">    yaxis2=<span class="built_in">dict</span>(</span><br><span class="line">        domain=[<span class="number">0.6</span>, <span class="number">0.95</span>],</span><br><span class="line">        anchor=<span class="string">&#x27;x2&#x27;</span>,</span><br><span class="line">        showgrid=<span class="literal">False</span></span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line">fig = go.Figure(data=data, layout=layout)</span><br><span class="line">pyplt(fig)</span><br></pre></td></tr></table></figure>

<p><img src="https://s3.ax1x.com/2020/12/10/rFoRbj.png" alt="嵌入式子图"></p>
<p>看过之后让人恍然大悟。</p>
<h2 id="时间序列高亮显示"><a href="#时间序列高亮显示" class="headerlink" title="时间序列高亮显示"></a>时间序列高亮显示</h2><p>这一部分实际上是SVG图形的绘制，我个人感觉用不到，就暂时忽略了。</p>
<p><img src="https://s3.ax1x.com/2020/12/10/rFo2rQ.png" alt="时间序列高亮显示"></p>
<p>这个高亮也不是很亮啊…也没说怎么调，有没有别的模式。<br>用到的话还是官网吧，从这个图中只能看出来是阴影的那块区域。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly <span class="keyword">as</span> py</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objs <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">pyplt = py.offline.iplot</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">r&#x27;C:\Users\ASUS\Desktop\python\Chapter03\dat\day01.csv&#x27;</span>, index_col=[<span class="string">&#x27;date&#x27;</span>], parse_dates=[<span class="string">&#x27;date&#x27;</span>]) <span class="comment"># 读取数据。</span></span><br><span class="line">df.sort_index(inplace=<span class="literal">True</span>) <span class="comment"># 设置索引列从大到小排序</span></span><br><span class="line">df = df.iloc[<span class="number">-300</span>:<span class="number">-100</span>] <span class="comment"># 选取其中的200行数据</span></span><br><span class="line"></span><br><span class="line">trace0 = go.Scatter(x=df.index, y=df[<span class="string">&#x27;close&#x27;</span>], mode=<span class="string">&#x27;lines&#x27;</span>, name=<span class="string">&#x27;temperature&#x27;</span>) <span class="comment"># 源代码是mode = &#x27;line&#x27; 改一下</span></span><br><span class="line"></span><br><span class="line">data = [trace0]</span><br><span class="line">layout = &#123;</span><br><span class="line">    <span class="comment"># 我们通过创建矩形的方式来高亮某一个时间区间</span></span><br><span class="line">    <span class="string">&#x27;shapes&#x27;</span>: [</span><br><span class="line">        <span class="comment"># 首先，我们高亮显示1月4日---&gt;3月6日.</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;rect&#x27;</span>,</span><br><span class="line">            <span class="comment"># x参考系使用绝对坐标系（相对于轴）</span></span><br><span class="line">            <span class="string">&#x27;xref&#x27;</span>: <span class="string">&#x27;x&#x27;</span>,</span><br><span class="line">            <span class="comment"># y参考系使用相对坐标系（相对于plot）</span></span><br><span class="line">            <span class="string">&#x27;yref&#x27;</span>: <span class="string">&#x27;paper&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;x0&#x27;</span>: <span class="string">&#x27;2015-01-04&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;y0&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&#x27;x1&#x27;</span>: <span class="string">&#x27;2015-03-06&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;y1&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">&#x27;fillcolor&#x27;</span>: <span class="string">&#x27;#d3d3d3&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;opacity&#x27;</span>: <span class="number">0.2</span>,</span><br><span class="line">            <span class="string">&#x27;line&#x27;</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;width&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment"># 其次，我们高亮显示区间4月20日---&gt;6月22日.</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;rect&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;xref&#x27;</span>: <span class="string">&#x27;x&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;yref&#x27;</span>: <span class="string">&#x27;paper&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;x0&#x27;</span>: <span class="string">&#x27;2015-04-20&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;y0&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="string">&#x27;x1&#x27;</span>: <span class="string">&#x27;2015-06-22&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;y1&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">&#x27;fillcolor&#x27;</span>: <span class="string">&#x27;#d3d3d3&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;opacity&#x27;</span>: <span class="number">0.2</span>,</span><br><span class="line">            <span class="string">&#x27;line&#x27;</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;width&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fig = &#123;<span class="string">&#x27;data&#x27;</span>: data, <span class="string">&#x27;layout&#x27;</span>: layout&#125;</span><br><span class="line">pyplt(fig)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><code>layout</code>里都是字典。<br>书上的高级绘图就完事了。</p>
<h2 id="ggplot2绘图示例"><a href="#ggplot2绘图示例" class="headerlink" title="ggplot2绘图示例"></a>ggplot2绘图示例</h2><p>源代码在我的<code>github</code>上，这里是图：</p>
<p><img src="https://s3.ax1x.com/2020/12/10/rFHlUs.png"></p>
<p><img src="https://s3.ax1x.com/2020/12/10/rFH15n.png"></p>
<p>R语言的<code>plot_ly</code>函数，修改参数<code>type</code>即可实现各种图</p>
<h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><p>主要是在讲子图的画法，有两种，一种是<code>make_subplots</code>，除了定义<code>rows cols</code>，还可以设置<code>specs</code>，即复杂的子图位置，需要看例子明白，分清行列关系；再一种是用<code>domain</code>给出图的明确的范围，注意理解<code>anchor</code>的含义。<br>个人感觉应该多尝试去做图表一起的那个和子图的应用，确实也是对时序数据用的少。<br>对于<code>layout</code>、<code>annotation</code>更应该心中有谱，除了作图流程以外，所用到的函数，其大概的参数和参数格式是什么应该在实战中重点关注。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button onclick="document.querySelector('.post-reward').classList.toggle('active');">
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wxpay.jpg" alt="martini 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="/images/alipay.jpg" alt="martini 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/python/" rel="tag"><i class="fa fa-tag"></i> python</a>
              <a href="/tags/notes/" rel="tag"><i class="fa fa-tag"></i> notes</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/11/28/%E3%80%8Apython%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" rel="prev" title="《python机器学习》读书笔记">
                  <i class="fa fa-chevron-left"></i> 《python机器学习》读书笔记
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/12/10/%E3%80%8A%E5%9F%BA%E4%BA%8Eplotly%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96%E7%BB%98%E5%9B%BE%E3%80%8B%E7%AC%94%E8%AE%B02/" rel="next" title="《基于plotly的可视化绘图》笔记2">
                  《基于plotly的可视化绘图》笔记2 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






      

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 2020 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">martini</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">187k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">2:50</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <script size="300" alpha="0.6" zIndex="-1" src="//cdn.jsdelivr.net/npm/ribbon.js@1.0.2/dist/ribbon.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  




  <script src="/js/local-search.js"></script>













  <script>
    NProgress.configure({
      showSpinner: true
    });
    NProgress.start();
    document.addEventListener('readystatechange', () => {
      if (document.readyState === 'interactive') {
        NProgress.inc(0.8);
      }
      if (document.readyState === 'complete') {
        NProgress.done();
      }
    });
    document.addEventListener('pjax:send', () => {
      NProgress.start();
    });
    document.addEventListener('pjax:success', () => {
      NProgress.done();
    });
  </script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>








  

  

</body>
</html>
